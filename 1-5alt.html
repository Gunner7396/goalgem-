<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.5 Alt Analiz Motoru</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --primary: #38bdf8;
            --success: #22c55e;
            --warning: #eab308;
            --danger: #ef4444;
            --text: #f8fafc;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 400px;
            background: var(--card);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        h2 { text-align: center; color: var(--primary); margin-bottom: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 14px; color: #94a3b8; }
        select, input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #334155;
            background: #0f172a;
            color: white;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            border: none;
            border-radius: 8px;
            color: var(--bg);
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        #result {
            margin-top: 25px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            text-align: center;
        }
        .percentage { font-size: 48px; font-weight: 800; margin: 10px 0; }
        .reasoning { font-size: 14px; line-height: 1.5; color: #cbd5e1; }
    </style>
</head>
<body>

<div class="container">
    <h2>Analiz Motoru v1.0</h2>
    
    <div class="input-group">
        <label>Lig Seçimi</label>
        <select id="league">
            <option value="italya">İtalya Serie A</option>
            <option value="ispanya">İspanya La Liga</option>
            <option value="almanya">Almanya Bundesliga</option>
            <option value="ingiltere">İngiltere Premier Lig</option>
        </select>
    </div>

    <div class="input-group">
        <label>Ortalama npxG / Sh (En Yüksek Olan)</label>
        <input type="number" id="npxg" step="0.01" placeholder="Örn: 0.08">
    </div>

    <div class="input-group">
        <label>Toplam PPA (Ceza Sahasına Pas)</label>
        <input type="number" id="ppa" placeholder="Örn: 10">
    </div>

    <div class="input-group">
        <label>Toplam PrgC (Top Taşıma)</label>
        <input type="number" id="prgc" placeholder="Örn: 12">
    </div>

    <div class="input-group">
        <label>Toplam Def 3rd Tkl+Int</label>
        <input type="number" id="tkl" placeholder="Örn: 35">
    </div>

    <button onclick="calculate()">ANALİZ ET</button>

    <div id="result">
        <div id="resText">GÜVEN ORANI</div>
        <div class="percentage" id="resPerc">%0</div>
        <div class="reasoning" id="resDesc"></div>
    </div>
</div>

<script>
function calculate() {
    const league = document.getElementById('league').value;
    const npxg = parseFloat(document.getElementById('npxg').value);
    const ppa = parseFloat(document.getElementById('ppa').value);
    const prgc = parseFloat(document.getElementById('prgc').value);
    const tkl = parseFloat(document.getElementById('tkl').value);

    let score = 50; // Baz puan
    let reasons = [];

    // LİG BAZLI EŞİKLER
    const thresholds = {
        italya: { npxg: 0.08, ppa: 10, prgc: 12, tkl: 40 },
        ispanya: { npxg: 0.09, ppa: 12, prgc: 10, tkl: 35 },
        almanya: { npxg: 0.10, ppa: 14, prgc: 15, tkl: 30 },
        ingiltere: { npxg: 0.09, ppa: 13, prgc: 18, tkl: 32 }
    };

    const t = thresholds[league];

    // 1. VETO KONTROLÜ (npxG/Sh)
    if (npxg <= t.npxg) { score += 15; } else { score -= 20; reasons.push("Şut kalitesi tehlikeli seviyede."); }

    // 2. ÜRETİM KONTROLÜ (PPA)
    if (ppa <= t.ppa) { score += 15; } else { score -= 15; reasons.push("Ceza sahasına giriş çok fazla."); }

    // 3. BİREYSEL TEHDİT (PrgC)
    if (prgc <= t.prgc) { score += 10; } else { score -= 10; reasons.push("Topla dikine penetrasyon yüksek."); }

    // 4. ZEKA/KOMPANSASYON (Tkl+Int vs PPA)
    if (tkl >= t.tkl) {
        score += 10;
    } else if (ppa < (t.ppa * 0.7)) {
        score += 8; // Zekice dokunuş: PPA çok düşükse Tkl düşüklüğü sorun değil
        reasons.push("Savunma az müdahale ediyor çünkü rakip gelemiyor.");
    } else {
        score -= 10;
        reasons.push("Savunma müdahale sayısı yetersiz.");
    }

    // Skor Sınırlandırma
    if (score > 92) score = 92; // %100 futbol için imkansızdır
    if (score < 10) score = 15;

    // Sonuç Ekranı
    const resDiv = document.getElementById('result');
    resDiv.style.display = 'block';
    document.getElementById('resPerc').innerText = '%' + score;
    
    if (score >= 80) {
        resDiv.style.background = '#064e3b';
        document.getElementById('resDesc').innerText = "Mükemmel kilitlenme! " + reasons.join(" ");
    } else if (score >= 65) {
        resDiv.style.background = '#451a03';
        document.getElementById('resDesc').innerText = "Orta risk. " + reasons.join(" ");
    } else {
        resDiv.style.background = '#450a0a';
        document.getElementById('resDesc').innerText = "Uzak durulmalı. " + reasons.join(" ");
    }
}
</script>

</body>
</html>

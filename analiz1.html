<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ScoreMaster v16</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: #eee; font-family: 'Inter', sans-serif; }
        .fotmob-dark { background: #111; border-radius: 8px; border: 1px solid #1a1a1a; }
        .accent-green { color: #00ff85; }
        .input-dark { background: #181818; border: 1px solid #222; border-radius: 6px; padding: 10px; text-align: center; color: white; font-weight: 700; outline: none; font-size: 14px; width: 100%; }
        .league-btn { background: #151515; border: 1px solid #222; padding: 10px; border-radius: 6px; font-size: 10px; font-weight: 800; color: #444; transition: 0.2s; cursor: pointer; text-align: center; }
        .league-btn.active { border-color: #00ff85; color: #00ff85; background: #00ff8510; box-shadow: 0 0 15px rgba(0,255,133,0.1); }
        .prob-bar { height: 4px; background: #222; margin-top: 6px; overflow: hidden; border-radius: 2px; }
        .prob-fill { height: 100%; background: #00ff85; transition: width 0.3s cubic-bezier(0.17, 0.67, 0.83, 0.67); }
    </style>
</head>
<body class="p-4 pb-24">

    <div class="flex justify-between items-center mb-6">
        <h1 class="text-xl font-black italic uppercase tracking-tighter">SCORE<span class="accent-green">MASTER</span> v16</h1>
        <div id="status" class="text-[8px] font-black bg-white/5 px-2 py-1 rounded uppercase accent-green">Motor Hazır</div>
    </div>

    <div class="grid grid-cols-5 gap-2 mb-6" id="leagueBox">
        <div onclick="triggerEngine('PL', this)" class="league-btn active">PL</div>
        <div onclick="triggerEngine('LL', this)" class="league-btn">LL</div>
        <div onclick="triggerEngine('SA', this)" class="league-btn">SA</div>
        <div onclick="triggerEngine('BL', this)" class="league-btn">BL</div>
        <div onclick="triggerEngine('L1', this)" class="league-btn">L1</div>
    </div>

    <div class="fotmob-dark p-5 mb-6">
        <div class="flex gap-4 mb-6 border-b border-white/10 pb-3">
            <input id="hTeam" placeholder="EV SAHİBİ" class="w-full bg-transparent text-sm font-bold uppercase outline-none placeholder:text-gray-800">
            <input id="aTeam" placeholder="DEPLASMAN" class="w-full bg-transparent text-sm font-bold uppercase outline-none text-right placeholder:text-gray-800">
        </div>
        
        <div class="grid grid-cols-3 gap-3 items-center mb-4">
            <input type="number" step="0.01" id="h_npxg" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-500 font-black text-center uppercase">npxG/Sh</span>
            <input type="number" step="0.01" id="a_npxg" class="input-dark" placeholder="—">
            
            <input type="number" id="h_ppa" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-500 font-black text-center uppercase">PPA</span>
            <input type="number" id="a_ppa" class="input-dark" placeholder="—">

            <input type="number" id="h_sca" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-500 font-black text-center uppercase">SCA</span>
            <input type="number" id="a_sca" class="input-dark" placeholder="—">

            <input type="number" id="h_prgr" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-500 font-black text-center uppercase">PrgR</span>
            <input type="number" id="a_prgr" class="input-dark" placeholder="—">
        </div>
        
        <button onclick="triggerEngine(currentLeague)" class="w-full bg-[#00ff85] text-black py-4 rounded-xl font-black text-[11px] uppercase italic tracking-widest active:scale-95 transition-all shadow-lg">
            ANALİZ ET (MOTORU ATEŞLE)
        </button>
    </div>

    <div id="resArea" class="hidden animate-in fade-in zoom-in duration-200">
        <div class="fotmob-dark p-5 border-2 border-green-500/20">
            <div id="resLabel" class="text-[10px] font-black accent-green mb-5 text-center uppercase tracking-[0.2em] border-b border-white/5 pb-2"></div>
            
            <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="text-center">
                    <div class="text-[8px] text-gray-500 font-black mb-1">1.5 ALT</div>
                    <div id="p1" class="text-xl font-black">0%</div>
                    <div class="prob-bar"><div id="b1" class="prob-fill w-0"></div></div>
                </div>
                <div class="text-center border-x border-white/10 px-2">
                    <div class="text-[8px] text-gray-400 font-black mb-1">2.0 GOL</div>
                    <div id="p2" class="text-xl font-black accent-green">0%</div>
                    <div class="prob-bar"><div id="b2" class="prob-fill w-0"></div></div>
                </div>
                <div class="text-center">
                    <div class="text-[8px] text-gray-500 font-black mb-1">3.0 GOL</div>
                    <div id="p3" class="text-xl font-black">0%</div>
                    <div class="prob-bar"><div id="b3" class="prob-fill w-0"></div></div>
                </div>
            </div>

            <button onclick="resetAll()" class="w-full bg-white/5 text-gray-500 py-2 rounded text-[9px] font-black uppercase tracking-widest hover:text-white transition-colors">
                TEMİZLE VE YENİ MAÇA GEÇ
            </button>
        </div>
    </div>

    <script>
        let currentLeague = 'PL';

        function triggerEngine(leagueCode, element = null) {
            // Lig Seçimi Görsel Güncelleme
            if (element) {
                document.querySelectorAll('.league-btn').forEach(b => b.classList.remove('active'));
                element.classList.add('active');
            }
            currentLeague = leagueCode;

            // Verileri Al
            const h_sca = parseFloat(document.getElementById('h_sca').value);
            const a_sca = parseFloat(document.getElementById('a_sca').value);
            const h_prgr = parseFloat(document.getElementById('h_prgr').value);
            const a_prgr = parseFloat(document.getElementById('a_prgr').value);

            // Veri Kontrolü (Boşsa çalıştırma)
            if (isNaN(h_sca) || isNaN(h_prgr)) {
                console.log("Motor beklemede: Metrik girilmedi.");
                return;
            }

            // ANALİZ MOTORU (Saf Prensipler)
            const avgSCA = (h_sca + a_sca) / 2;
            const avgPrgR = (h_prgr + a_prgr) / 2;

            let p1, p2, p3;
            if (avgPrgR <= 32 && avgSCA <= 14.5) { p1=75; p2=20; p3=5; }
            else if (avgPrgR <= 48 && avgSCA <= 21.5) { p1=20; p2=65; p3=15; }
            else if (avgPrgR > 50 || avgSCA > 25.5) { p1=5; p2=25; p3=70; }
            else { p1=15; p2=60; p3=25; }

            // UI'ı Zorla Güncelle (Her tıklamada sıfırlayıp tekrar yazar)
            const resArea = document.getElementById('resArea');
            resArea.classList.remove('hidden');
            
            document.getElementById('resLabel').innerText = currentLeague + " MODU AKTİF";
            
            // Rakamları ve Barları Güncelle
            updateDisplay('p1', 'b1', p1);
            updateDisplay('p2', 'b2', p2);
            updateDisplay('p3', 'b3', p3);

            document.getElementById('status').innerText = leagueCode + " ANALİZ EDİLDİ";
        }

        function updateDisplay(textId, barId, value) {
            document.getElementById(textId).innerText = value + "%";
            document.getElementById(barId).style.width = "0%"; // Önce sıfırla (animasyon için)
            setTimeout(() => {
                document.getElementById(barId).style.width = value + "%";
            }, 10);
        }

        function resetAll() {
            const ids = ["hTeam", "aTeam", "h_npxg", "a_npxg", "h_ppa", "a_ppa", "h_sca", "a_sca", "h_prgr", "a_prgr"];
            ids.forEach(id => document.getElementById(id).value = "");
            document.getElementById('resArea').classList.add('hidden');
            document.getElementById('status').innerText = "Motor Hazır";
        }
    </script>
</body>
</html>

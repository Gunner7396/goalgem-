<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ScoreMaster v21</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #080808; color: #fff; font-family: 'Inter', sans-serif; padding: 12px; }
        .fotmob-dark { background: #121212; border: 1px solid #222; border-radius: 12px; }
        .accent-green { color: #00ff85; }
        .league-btn { background: #1a1a1a; border: 1px solid #333; padding: 10px; border-radius: 8px; font-size: 11px; font-weight: 800; color: #555; }
        .league-btn.active { border-color: #00ff85; color: #00ff85; background: #00ff8510; }
        .input-dark { background: #181818; border: 1px solid #252525; border-radius: 8px; padding: 12px; text-align: center; color: white; font-weight: 700; outline: none; font-size: 14px; width: 100%; }
        .input-dark:focus { border-color: #00ff85; }
        
        /* Analiz Kartı */
        .res-card { background: #151515; border: 1px solid #222; border-radius: 10px; padding: 12px; margin-bottom: 8px; position: relative; }
        .status-dot { width: 30px; height: 30px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; border: 1px solid #333; cursor: pointer; }
        .dot-w { color: #00ff85; } .dot-w.active { background: #00ff85; color: #000; }
        .dot-l { color: #ff4b4b; } .dot-l.active { background: #ff4b4b; color: #fff; }
        .prob-line { height: 4px; background: #222; border-radius: 2px; margin-top: 4px; overflow: hidden; }
        .prob-fill { height: 100%; background: #00ff85; }
    </style>
</head>
<body class="pb-32">

    <div class="flex justify-between items-center mb-4">
        <h1 class="text-xl font-black italic uppercase italic tracking-tighter">SCORE<span class="accent-green">MASTER</span> v21</h1>
        <div class="text-right"><span id="wr" class="text-xl font-black accent-green">0%</span><p class="text-[7px] text-gray-500 uppercase font-bold">W/R</p></div>
    </div>

    <div class="grid grid-cols-5 gap-2 mb-4">
        <button onclick="setL('PL', this)" class="league-btn active">PL</button>
        <button onclick="setL('LL', this)" class="league-btn">LL</button>
        <button onclick="setL('SA', this)" class="league-btn">SA</button>
        <button onclick="setL('BL', this)" class="league-btn">BL</button>
        <button onclick="setL('L1', this)" class="league-btn">L1</button>
    </div>

    <div class="fotmob-dark p-4 mb-4">
        <div class="flex gap-4 mb-5">
            <input id="hT" oninput="save()" placeholder="HOME" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm">
            <input id="aT" oninput="save()" placeholder="AWAY" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm text-right">
        </div>
        <div class="grid grid-cols-3 gap-3 mb-5">
            <input type="number" step="0.01" id="h_xg" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-bold text-center self-center uppercase">npxG/Sh</span>
            <input type="number" step="0.01" id="a_xg" oninput="save()" class="input-dark" placeholder="—">
            <input type="number" id="h_ppa" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-bold text-center self-center uppercase">PPA</span>
            <input type="number" id="a_ppa" oninput="save()" class="input-dark" placeholder="—">
            <input type="number" id="h_sca" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-bold text-center self-center uppercase">SCA</span>
            <input type="number" id="a_sca" oninput="save()" class="input-dark" placeholder="—">
            <input type="number" id="h_pr" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-bold text-center self-center uppercase">PrgR</span>
            <input type="number" id="a_pr" oninput="save()" class="input-dark" placeholder="—">
        </div>
        <button onclick="calculate()" class="w-full bg-[#00ff85] text-black py-4 rounded-xl font-black text-xs uppercase italic tracking-widest active:scale-95 transition-all">ANALİZ ET & EKLE</button>
    </div>

    <div id="stack" class="space-y-2"></div>

    <div class="fixed bottom-0 left-0 w-full p-4 bg-black/90 border-t border-white/5 flex gap-2">
        <button onclick="resetInp()" class="flex-1 py-3 text-[10px] font-black uppercase text-gray-500 border border-gray-800 rounded-lg">Temizle</button>
        <button onclick="resetStack()" class="flex-1 py-3 text-[10px] font-black uppercase text-red-900 border border-red-950/20 rounded-lg">Listeyi Sil</button>
    </div>

    <script>
        const BARAJ = {
            PL: { alt: {xg:0.09, ppa:7.5, sca:18.5, pr:38}, t2: {xg:0.12, ppa:11, sca:25, pr:52} },
            LL: { alt: {xg:0.08, ppa:6.0, sca:16.0, pr:32}, t2: {xg:0.11, ppa:9, sca:22, pr:46} },
            SA: { alt: {xg:0.08, ppa:6.5, sca:15.5, pr:30}, t2: {xg:0.10, ppa:9.5, sca:21, pr:44} },
            BL: { alt: {xg:0.11, ppa:9.0, sca:22.0, pr:45}, t2: {xg:0.14, ppa:13, sca:28, pr:58} },
            L1: { alt: {xg:0.09, ppa:7.0, sca:17.5, pr:34}, t2: {xg:0.11, ppa:10, sca:23, pr:48} }
        };

        let curL = localStorage.getItem('v21_l') || 'PL';

        function save() {
            ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => {
                localStorage.setItem('v21_'+id, document.getElementById(id).value);
            });
        }

        function setL(c, b) {
            curL = c; localStorage.setItem('v21_l', c);
            document.querySelectorAll('.league-btn').forEach(btn => btn.classList.remove('active'));
            b.classList.add('active');
        }

        function calculate() {
            const getV = (h, a) => (parseFloat(document.getElementById(h).value) + parseFloat(document.getElementById(a).value)) / 2;
            const avg = { xg: getV('h_xg','a_xg'), ppa: getV('h_ppa','a_ppa'), sca: getV('h_sca','a_sca'), pr: getV('h_pr','a_pr') };
            
            if(isNaN(avg.xg)) { alert("Veri girin!"); return; }

            const b = BARAJ[curL];
            let p1, p2, p3, res;

            // LİG BAZLI GERÇEK MOTOR (Sadece o ligin barajına bakar)
            if (avg.xg <= b.alt.xg && avg.ppa <= b.alt.ppa && avg.sca <= b.alt.sca && avg.pr <= b.alt.pr) {
                res="1.5 ALT"; p1=75; p2=20; p3=5;
            } else if (avg.xg <= b.t2.xg && avg.ppa <= b.t2.ppa && avg.sca <= b.t2.sca && avg.pr <= b.t2.pr) {
                res="TAM 2.0"; p1=15; p2=70; p3=15;
            } else {
                res="TAM 3.0"; p1=5; p2=25; p3=70;
            }

            const card = `
                <div class="res-card">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <span class="text-[9px] font-black accent-green bg-green-500/10 px-2 py-0.5 rounded mr-2 uppercase">${curL}</span>
                            <span class="text-[11px] font-bold uppercase">${document.getElementById('hT').value.slice(0,3)}-${document.getElementById('aT').value.slice(0,3)}</span>
                        </div>
                        <div class="flex gap-2">
                            <div onclick="tgl(this,'w')" class="status-dot dot-w">W</div>
                            <div onclick="tgl(this,'l')" class="status-dot dot-l">L</div>
                            <div onclick="this.closest('.res-card').remove(); svS();" class="status-dot text-gray-700 border-none">×</div>
                        </div>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="flex-1 pr-4">
                            <div class="flex justify-between text-[10px] font-black mb-1">
                                <span class="accent-green">${res}</span>
                                <span class="text-gray-500">${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%</span>
                            </div>
                            <div class="prob-line"><div class="prob-fill" style="width:${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%"></div></div>
                        </div>
                        <div class="text-[8px] text-gray-600 font-bold uppercase leading-tight text-right">
                            1.5A: ${p1}%<br>T2.0: ${p2}%<br>T3.0: ${p3}%
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('stack').insertAdjacentHTML('afterbegin', card);
            svS();
        }

        function tgl(b, t) {
            b.parentElement.querySelectorAll('.status-dot').forEach(d => d.classList.remove('active'));
            b.classList.add('active'); svS(); updW();
        }

        function svS() { localStorage.setItem('v21_stack', document.getElementById('stack').innerHTML); }
        function updW() {
            const w = document.querySelectorAll('.dot-w.active').length;
            const t = document.querySelectorAll('.dot-w.active, .dot-l.active').length;
            document.getElementById('wr').innerText = t > 0 ? Math.round((w/t)*100) + "%" : "0%";
        }
        function resetInp() { ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => { document.getElementById(id).value = ""; localStorage.removeItem('v21_'+id); }); }
        function resetStack() { if(confirm("Sil?")) { document.getElementById('stack').innerHTML=""; svS(); updW(); } }

        window.onload = () => {
            ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => {
                const v = localStorage.getItem('v21_'+id); if(v) document.getElementById(id).value = v;
            });
            document.getElementById('stack').innerHTML = localStorage.getItem('v21_stack') || "";
            updW();
        };
    </script>
</body>
</html>

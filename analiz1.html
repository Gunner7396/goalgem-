<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>v50.1 Stable Storage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: -apple-system, sans-serif; -webkit-tap-highlight-color: transparent; }
        .glass { background: #1c1c1e; border: 1px solid rgba(255,255,255,0.1); border-radius: 14px; }
        .in-box { background: #2c2c2e; border: none; border-radius: 8px; padding: 12px; color: #fff; font-weight: 700; text-align: center; width: 100%; font-size: 14px; outline: none; border: 1px solid transparent; }
        .in-box:focus { border-color: #30d158; }
        .btn-lig { padding: 6px 12px; border-radius: 10px; font-size: 10px; font-weight: 800; background: #1c1c1e; color: #555; border: 1px solid #2c2c2e; }
        .btn-lig.active { background: #30d158; color: #000; border-color: #30d158; }
        .mini-card { background: #1c1c1e; border-radius: 12px; padding: 12px; border: 1px solid rgba(255,255,255,0.05); }
        .pct-bar { height: 3px; background: #333; border-radius: 2px; overflow: hidden; width: 45px; }
        .pct-fill { height: 100%; transition: width 0.8s ease; }
    </style>
</head>
<body class="p-4">

    <div class="flex justify-between items-center mb-6">
        <h1 class="text-xl font-black italic">V50<span class="text-green-500">.STABLE</span></h1>
        <button onclick="clrAll()" class="p-2 glass text-[10px] font-black text-red-500">TEMİZLE</button>
    </div>

    <div class="glass p-5 mb-6">
        <div class="grid grid-cols-2 gap-2 mb-4">
            <input id="hN" placeholder="EV" class="in-box uppercase text-xs"><input id="aN" placeholder="DEP" class="in-box uppercase text-xs">
            <input type="number" id="h_xg" class="in-box" placeholder="npxG/Sh"><input type="number" id="a_xg" class="in-box" placeholder="npxG/Sh">
            <input type="number" id="h_ppa" class="in-box" placeholder="PPA"><input type="number" id="a_ppa" class="in-box" placeholder="PPA">
            <input type="number" id="h_sca" class="in-box" placeholder="SCA"><input type="number" id="a_sca" class="in-box" placeholder="SCA">
            <input type="number" id="h_pr" class="in-box" placeholder="PrgR"><input type="number" id="a_pr" class="in-box" placeholder="PrgR">
        </div>
        <button onclick="run()" class="w-full bg-[#30d158] text-black font-black p-4 rounded-xl text-[11px] uppercase tracking-widest">ANALİZİ TAMAMLA</button>
    </div>

    <div id="latestCard"></div>

    <script>
        const B = { PL:[.11,22,48,95], LL:[.09,16,38,75], SA:[.09,17,38,75], BL:[.13,24,50,105], L1:[.1,18,42,85] };
        
        function run() {
            const ids = ["h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"];
            const n = ids.map(id => Number(document.getElementById(id).value || 0));
            const hN = document.getElementById('hN').value || "EV";
            const aN = document.getElementById('aN').value || "DEP";
            
            const score = Math.round(((n[0]+n[1])/2/B.BL[0])*40 + ((n[2]+n[3])/B.BL[1])*30 + ((n[4]+n[5])/B.BL[2])*20 + ((n[6]+n[7])/B.BL[3])*10);
            
            const p1 = Math.max(2, 100 - score);
            const p2 = Math.min(score, 115 - Math.abs(score-80)); 
            const p3 = Math.max(0, score - 80);
            const tot = p1 + p2 + p3;
            const d = [Math.round((p1/tot)*100), Math.round((p2/tot)*100), Math.round((p3/tot)*100)];

            const item = { hN, aN, score, d, id: Date.now() };
            localStorage.setItem('v50_last', JSON.stringify(item));
            render();
        }

        function render() {
            const i = JSON.parse(localStorage.getItem('v50_last'));
            if(!i) return;
            const statusTxt = i.score > 80 ? 'POTANSİYEL GOL' : 'DENGELİ AKIŞ';
            document.getElementById('latestCard').innerHTML = `
                <div class="mini-card relative">
                    <div class="text-[10px] font-bold text-gray-500 uppercase mb-2">${i.hN} - ${i.aN}</div>
                    <div class="text-[22px] font-black italic">%${i.score} ENERJİ</div>
                    <div class="text-[9px] font-bold text-red-500 mb-4">${statusTxt}</div>
                    <div class="flex justify-between border-t border-white/5 pt-3">
                        <div class="text-[7px]">T1(0-1): ${i.d[0]}%</div>
                        <div class="text-[7px]">T2(2): ${i.d[1]}%</div>
                        <div class="text-[7px]">T3(3): ${i.d[2]}%</div>
                    </div>
                </div>`;
        }

        function clrAll() { localStorage.removeItem('v50_last'); location.reload(); }
        window.onload = render;
    </script>
</body>
</html>

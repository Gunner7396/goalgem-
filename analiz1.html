<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Precision v41</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; overflow-x: hidden; }
        .glass { background: rgba(28, 28, 30, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); }
        .input-box { background: #1c1c1e; border: none; border-radius: 12px; padding: 12px; color: #fff; font-weight: 600; text-align: center; width: 100%; font-size: 15px; transition: 0.3s; }
        .input-box:focus { background: #2c2c2e; outline: 2px solid #30d158; }
        .btn-lig { padding: 8px 16px; border-radius: 20px; font-size: 11px; font-weight: 700; background: #1c1c1e; color: #8e8e93; transition: 0.3s; white-space: nowrap; }
        .btn-lig.active { background: #fff; color: #000; }
        .analyze-btn { background: #30d158; color: #000; font-weight: 800; border-radius: 16px; padding: 18px; width: 100%; transition: 0.2s; box-shadow: 0 10px 20px rgba(48, 209, 88, 0.2); }
        .analyze-btn:active { transform: scale(0.96); opacity: 0.8; }
        .result-card { border-radius: 24px; padding: 20px; margin-top: 15px; position: relative; overflow: hidden; }
        .energy-bar-bg { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; }
        .energy-bar-fill { height: 100%; border-radius: 3px; transition: 1s ease-out; }
    </style>
</head>
<body class="p-4">

    <div class="flex justify-between items-center mb-6 mt-2">
        <h1 class="text-xl font-bold tracking-tight">V41<span class="text-green-500">.PRECISION</span></h1>
        <div onclick="location.reload()" class="bg-[#1c1c1e] px-4 py-2 rounded-full text-[10px] font-bold text-gray-400">SIFIRLA</div>
    </div>

    <div class="flex gap-2 overflow-x-auto no-scrollbar mb-6 pb-2">
        <button onclick="setL('PL')" id="l-PL" class="btn-lig active">PREMIER LEAGUE</button>
        <button onclick="setL('LL')" id="l-LL" class="btn-lig">LA LIGA</button>
        <button onclick="setL('SA')" id="l-SA" class="btn-lig">SERIE A</button>
        <button onclick="setL('BL')" id="l-BL" class="btn-lig">BUNDESLIGA</button>
        <button onclick="setL('L1')" id="l-L1" class="btn-lig">LIGUE 1</button>
    </div>

    <div class="glass p-5 rounded-[28px] mb-4">
        <div class="grid grid-cols-2 gap-4 mb-6">
            <input id="hN" placeholder="EV SAHİBİ" class="bg-transparent border-b border-gray-800 p-2 text-sm font-bold uppercase outline-none">
            <input id="aN" placeholder="DEPLASMAN" class="bg-transparent border-b border-gray-800 p-2 text-sm font-bold uppercase text-right outline-none">
        </div>

        <div class="space-y-4">
            <div class="grid grid-cols-2 gap-3">
                <input type="number" step="0.01" id="h_xg" class="input-box" placeholder="EV npxG">
                <input type="number" step="0.01" id="a_xg" class="input-box" placeholder="DEP npxG">
            </div>
            <div class="grid grid-cols-2 gap-3">
                <input type="number" id="h_ppa" class="input-box" placeholder="EV PPA">
                <input type="number" id="a_ppa" class="input-box" placeholder="DEP PPA">
            </div>
            <div class="grid grid-cols-2 gap-3">
                <input type="number" id="h_sca" class="input-box" placeholder="EV SCA">
                <input type="number" id="a_sca" class="input-box" placeholder="DEP SCA">
            </div>
            <div class="grid grid-cols-2 gap-3">
                <input type="number" id="h_pr" class="input-box" placeholder="EV PrgR">
                <input type="number" id="a_pr" class="input-box" placeholder="DEP PrgR">
            </div>
        </div>

        <button onclick="calculate()" class="analyze-btn mt-8">ANALİZ ET</button>
    </div>

    <div id="res"></div>

    <script>
        const BARAJ = { PL: [0.11, 22, 48, 95], LL: [0.09, 16, 38, 75], SA: [0.09, 17, 38, 75], BL: [0.13, 24, 50, 105], L1: [0.10, 18, 42, 85] };
        let curL = 'PL';
        function setL(l){ curL=l; document.querySelectorAll('.btn-lig').forEach(b=>b.classList.remove('active')); document.getElementById('l-'+l).classList.add('active'); }

        function calculate() {
            const h = [document.getElementById('h_xg').value, document.getElementById('h_ppa').value, document.getElementById('h_sca').value, document.getElementById('h_pr').value].map(Number);
            const a = [document.getElementById('a_xg').value, document.getElementById('a_ppa').value, document.getElementById('a_sca').value, document.getElementById('a_pr').value].map(Number);
            const b = BARAJ[curL];
            
            // Hassas Ağırlıklı Hesaplama
            const score = Math.round(((h[0]+a[0])/2/b[0])*40 + ((h[1]+a[1])/b[1])*30 + ((h[2]+a[2])/b[2])*20 + ((h[3]+a[3])/b[3])*10);

            let p="1.5 ALT", c="#8e8e93", s="DÜŞÜK";
            if(score > 45){ p="1.5 ÜST"; c="#32ade6"; s="ORTA"; }
            if(score > 75){ p="TAM 2.0"; c="#ff9f0a"; s="YÜKSEK"; }
            if(score > 95){ p="TAM 3.0"; c="#30d158"; s="KRİTİK"; }
            if(score >= 110){ p="3.5 ÜST"; c="#ff453a"; s="TEHLİKE"; }

            const html = `
                <div class="glass result-card border-l-4" style="border-left-color: ${c}">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-[10px] font-black text-gray-500 uppercase">${document.getElementById('hN').value||'MAÇ'} ANALİZİ</span>
                        <span class="text-[10px] font-black px-2 py-1 rounded bg-white/5" style="color: ${c}">${s}</span>
                    </div>
                    <div class="flex justify-between items-end mb-4">
                        <div>
                            <p class="text-[11px] text-gray-500 font-bold uppercase">Tahmin</p>
                            <h2 class="text-3xl font-black italic" style="color: ${c}">${p}</h2>
                        </div>
                        <div class="text-right">
                            <p class="text-[11px] text-gray-500 font-bold uppercase">Enerji</p>
                            <h2 class="text-2xl font-black text-white">%${score}</h2>
                        </div>
                    </div>
                    <div class="energy-bar-bg mb-2">
                        <div class="energy-bar-fill" style="width: ${Math.min(score,100)}%; background: ${c}"></div>
                    </div>
                    <p class="text-[9px] text-gray-600 font-medium">* %110 üstü 3.5 ÜST riskidir. Şu an güvenli bölgedesiniz.</p>
                </div>`;
            document.getElementById('res').innerHTML = html;
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ScoreMaster v22</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: #fff; font-family: 'Inter', sans-serif; padding: 12px; }
        .fotmob-dark { background: #111; border: 1px solid #222; border-radius: 12px; }
        .accent-green { color: #00ff85; }
        .league-btn { background: #181818; border: 1px solid #333; padding: 12px; border-radius: 8px; font-size: 11px; font-weight: 800; color: #444; transition: 0.2s; }
        .league-btn.active { border-color: #00ff85; color: #00ff85; background: #00ff8515; box-shadow: 0 0 15px rgba(0,255,133,0.1); }
        .input-dark { background: #1a1a1a; border: 1px solid #252525; border-radius: 8px; padding: 12px; text-align: center; color: white; font-weight: 700; outline: none; font-size: 14px; width: 100%; }
        .input-dark:focus { border-color: #00ff85; }
        
        /* Analiz Kartı */
        .res-card { background: #121212; border: 1px solid #252525; border-left: 4px solid #00ff85; border-radius: 8px; padding: 14px; margin-bottom: 10px; }
        .status-dot { width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; border: 1px solid #333; cursor: pointer; transition: 0.2s; }
        .dot-w { color: #00ff85; border-color: #00ff8520; } .dot-w.active { background: #00ff85; color: #000; border-color: #00ff85; }
        .dot-l { color: #ff4b4b; border-color: #ff4b4b20; } .dot-l.active { background: #ff4b4b; color: #fff; border-color: #ff4b4b; }
        .prob-line { height: 5px; background: #222; border-radius: 3px; margin-top: 6px; overflow: hidden; }
        .prob-fill { height: 100%; background: #00ff85; transition: width 0.8s ease-in-out; }
    </style>
</head>
<body class="pb-32">

    <div class="flex justify-between items-center mb-5">
        <h1 class="text-2xl font-black italic uppercase tracking-tighter">SCORE<span class="accent-green">MASTER</span> <small class="text-[10px] opacity-30">V22</small></h1>
        <div class="text-right"><span id="wr" class="text-2xl font-black accent-green leading-none">0%</span><p class="text-[8px] text-gray-500 uppercase font-black">W/R Success</p></div>
    </div>

    <div class="grid grid-cols-5 gap-2 mb-5">
        <button onclick="setL('PL', this)" class="league-btn active">PL</button>
        <button onclick="setL('LL', this)" class="league-btn">LL</button>
        <button onclick="setL('SA', this)" class="league-btn">SA</button>
        <button onclick="setL('BL', this)" class="league-btn">BL</button>
        <button onclick="setL('L1', this)" class="league-btn">L1</button>
    </div>

    <div class="fotmob-dark p-5 mb-5 shadow-2xl">
        <div class="flex gap-4 mb-6">
            <input id="hT" oninput="save()" placeholder="HOME TEAM" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm placeholder:text-gray-800">
            <input id="aT" oninput="save()" placeholder="AWAY TEAM" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm text-right placeholder:text-gray-800">
        </div>
        <div class="grid grid-cols-3 gap-3 mb-6">
            <input type="number" step="0.01" id="h_xg" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[9px] text-gray-600 font-black text-center self-center uppercase">npxG/Sh</span>
            <input type="number" step="0.01" id="a_xg" oninput="save()" class="input-dark" placeholder="—">
            
            <input type="number" id="h_ppa" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[9px] text-gray-600 font-black text-center self-center uppercase">PPA</span>
            <input type="number" id="a_ppa" oninput="save()" class="input-dark" placeholder="—">
            
            <input type="number" id="h_sca" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[9px] text-gray-600 font-black text-center self-center uppercase">SCA</span>
            <input type="number" id="a_sca" oninput="save()" class="input-dark" placeholder="—">
            
            <input type="number" id="h_pr" oninput="save()" class="input-dark" placeholder="—">
            <span class="text-[9px] text-gray-600 font-black text-center self-center uppercase">PrgR</span>
            <input type="number" id="a_pr" oninput="save()" class="input-dark" placeholder="—">
        </div>
        <button onclick="calculate()" class="w-full bg-[#00ff85] text-black py-4 rounded-xl font-black text-[11px] uppercase italic tracking-[0.2em] active:scale-95 transition-all shadow-lg shadow-green-500/20">ANALİZİ LİSTEYE EKLE</button>
    </div>

    <div id="stack" class="space-y-3"></div>

    <div class="fixed bottom-0 left-0 w-full p-4 bg-black/90 backdrop-blur-md border-t border-white/5 flex gap-3">
        <button onclick="resetInp()" class="flex-1 py-3 text-[10px] font-black uppercase text-gray-500 border border-gray-800 rounded-xl">Inputları Sil</button>
        <button onclick="resetStack()" class="flex-1 py-3 text-[10px] font-black uppercase text-red-900 border border-red-950/20 rounded-xl">Analizleri Temizle</button>
    </div>

    <script>
        const BARAJ = {
            PL: { alt: {xg:0.09, ppa:7.5, sca:18.5, pr:38}, t2: {xg:0.12, ppa:11, sca:25, pr:52} },
            LL: { alt: {xg:0.08, ppa:6.0, sca:16.0, pr:32}, t2: {xg:0.11, ppa:9, sca:22, pr:46} },
            SA: { alt: {xg:0.08, ppa:6.5, sca:15.5, pr:30}, t2: {xg:0.10, ppa:9.5, sca:21, pr:44} },
            BL: { alt: {xg:0.11, ppa:9.0, sca:22.0, pr:45}, t2: {xg:0.14, ppa:13, sca:28, pr:58} },
            L1: { alt: {xg:0.09, ppa:7.0, sca:17.5, pr:34}, t2: {xg:0.11, ppa:10, sca:23, pr:48} }
        };

        let curL = localStorage.getItem('v22_l') || 'PL';

        function save() {
            ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => {
                localStorage.setItem('v22_'+id, document.getElementById(id).value);
            });
        }

        function setL(c, b) {
            curL = c; localStorage.setItem('v22_l', c);
            document.querySelectorAll('.league-btn').forEach(btn => btn.classList.remove('active'));
            b.classList.add('active');
        }

        function calculate() {
            const getV = (h, a) => (parseFloat(document.getElementById(h).value) + parseFloat(document.getElementById(a).value)) / 2;
            const avg = { xg: getV('h_xg','a_xg'), ppa: getV('h_ppa','a_ppa'), sca: getV('h_sca','a_sca'), pr: getV('h_pr','a_pr') };
            
            if(isNaN(avg.xg) || isNaN(avg.pr)) { alert("Metrikler boş bırakılamaz!"); return; }

            const b = BARAJ[curL];
            
            // GELİŞMİŞ PUANLAMA MOTORU (True Logic)
            let score = 0;
            if(avg.xg > b.alt.xg) score++; if(avg.xg > b.t2.xg) score++;
            if(avg.ppa > b.alt.ppa) score++; if(avg.ppa > b.t2.ppa) score++;
            if(avg.sca > b.alt.sca) score++; if(avg.sca > b.t2.sca) score++;
            if(avg.pr > b.alt.pr) score++; if(avg.pr > b.t2.pr) score++;

            let res, p1, p2, p3;
            // Puanlamaya göre sonuç dağılımı (Total 8 puan üzerinden)
            if(score <= 2) { res="1.5 ALT"; p1=78; p2=17; p3=5; }
            else if(score <= 5) { res="TAM 2.0"; p1=15; p2=68; p3=17; }
            else { res="TAM 3.0"; p1=5; p2=20; p3=75; }

            const card = `
                <div class="res-card animate-in fade-in slide-in-from-top-2">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center gap-3">
                            <span class="text-[10px] font-black accent-green bg-green-500/10 px-2 py-1 rounded border border-green-500/20 uppercase italic">${curL}</span>
                            <span class="text-xs font-black uppercase italic">${document.getElementById('hT').value || 'H'}-${document.getElementById('aT').value || 'A'}</span>
                        </div>
                        <div class="flex gap-2">
                            <div onclick="tgl(this,'w')" class="status-dot dot-w">W</div>
                            <div onclick="tgl(this,'l')" class="status-dot dot-l">L</div>
                            <div onclick="this.closest('.res-card').remove(); svS();" class="status-dot border-none opacity-40">×</div>
                        </div>
                    </div>
                    <div class="flex gap-4 items-end">
                        <div class="flex-1">
                            <div class="flex justify-between text-[11px] font-black mb-1">
                                <span class="accent-green uppercase tracking-widest italic">${res}</span>
                                <span class="opacity-60">${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%</span>
                            </div>
                            <div class="prob-line"><div class="prob-fill" style="width:${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%"></div></div>
                        </div>
                        <div class="text-[8px] text-gray-500 font-bold uppercase leading-tight bg-white/5 p-2 rounded">
                            <span class="${res=='1.5 ALT'?'accent-green':''}">1.5A: ${p1}%</span><br>
                            <span class="${res=='TAM 2.0'?'accent-green':''}">T2.0: ${p2}%</span><br>
                            <span class="${res=='TAM 3.0'?'accent-green':''}">T3.0: ${p3}%</span>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('stack').insertAdjacentHTML('afterbegin', card);
            svS();
        }

        function tgl(b, t) {
            b.parentElement.querySelectorAll('.status-dot').forEach(d => d.classList.remove('active'));
            b.classList.add('active'); svS(); updW();
        }

        function svS() { localStorage.setItem('v22_stack', document.getElementById('stack').innerHTML); }
        function updW() {
            const w = document.querySelectorAll('.dot-w.active').length;
            const t = document.querySelectorAll('.dot-w.active, .dot-l.active').length;
            document.getElementById('wr').innerText = t > 0 ? Math.round((w/t)*100) + "%" : "0%";
        }
        function resetInp() { ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => { document.getElementById(id).value = ""; localStorage.removeItem('v22_'+id); }); }
        function resetStack() { if(confirm("Tüm analizler silinsin mi?")) { document.getElementById('stack').innerHTML=""; svS(); updW(); } }

        window.onload = () => {
            ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => {
                const v = localStorage.getItem('v22_'+id); if(v) document.getElementById(id).value = v;
            });
            document.getElementById('stack').innerHTML = localStorage.getItem('v22_stack') || "";
            updW();
        };
    </script>
</body>
</html>

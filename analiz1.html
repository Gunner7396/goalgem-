<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ScoreMaster v23</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: #eee; font-family: 'Inter', sans-serif; padding: 12px; }
        .fotmob-dark { background: #111; border: 1px solid #222; border-radius: 12px; }
        .accent-green { color: #00ff85; }
        .league-btn { background: #181818; border: 1px solid #333; padding: 12px; border-radius: 8px; font-size: 11px; font-weight: 800; color: #444; }
        .league-btn.active { border-color: #00ff85; color: #00ff85; background: #00ff8510; }
        .input-dark { background: #1a1a1a; border: 1px solid #252525; border-radius: 8px; padding: 12px; text-align: center; color: white; font-weight: 700; outline: none; font-size: 14px; width: 100%; }
        
        /* Analiz Kartı Tasarımı */
        .res-card { background: #121212; border: 1px solid #252525; border-radius: 10px; padding: 16px; margin-bottom: 12px; }
        .status-dot { width: 34px; height: 34px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; border: 1px solid #333; cursor: pointer; }
        .dot-w.active { background: #00ff85; color: #000; border-color: #00ff85; }
        .dot-l.active { background: #ff4b4b; color: #fff; border-color: #ff4b4b; }
        
        .limit-warn { font-size: 8px; color: #ffaa00; font-weight: 800; text-transform: uppercase; margin-top: 4px; display: flex; align-items: center; gap: 3px; }
        .prob-bar-bg { height: 6px; background: #222; border-radius: 3px; overflow: hidden; margin: 8px 0; }
        .prob-bar-fill { height: 100%; background: #00ff85; transition: width 1s ease; }
    </style>
</head>
<body class="pb-36">

    <div class="flex justify-between items-center mb-5 px-1">
        <h1 class="text-2xl font-black italic tracking-tighter uppercase">SCORE<span class="accent-green">MASTER</span> <span class="text-[10px] opacity-20">V23</span></h1>
        <div class="text-right leading-none"><span id="wr" class="text-2xl font-black accent-green">0%</span><p class="text-[8px] text-gray-600 font-bold uppercase mt-1">W/R</p></div>
    </div>

    <div class="grid grid-cols-5 gap-2 mb-5">
        <button onclick="setL('PL', this)" class="league-btn active">PL</button>
        <button onclick="setL('LL', this)" class="league-btn">LL</button>
        <button onclick="setL('SA', this)" class="league-btn">SA</button>
        <button onclick="setL('BL', this)" class="league-btn">BL</button>
        <button onclick="setL('L1', this)" class="league-btn">L1</button>
    </div>

    <div class="fotmob-dark p-5 mb-6">
        <div class="flex gap-4 mb-6">
            <input id="hT" oninput="save()" placeholder="HOME" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm italic">
            <input id="aT" oninput="save()" placeholder="AWAY" class="w-1/2 bg-transparent border-b border-white/10 py-2 font-black uppercase outline-none text-sm text-right italic">
        </div>
        <div class="grid grid-cols-3 gap-3 mb-6">
            <input type="number" step="0.01" id="h_xg" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-black text-center self-center">npxG/Sh</span>
            <input type="number" step="0.01" id="a_xg" class="input-dark" placeholder="—">
            <input type="number" id="h_ppa" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-black text-center self-center">PPA</span>
            <input type="number" id="a_ppa" class="input-dark" placeholder="—">
            <input type="number" id="h_sca" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-black text-center self-center">SCA</span>
            <input type="number" id="a_sca" class="input-dark" placeholder="—">
            <input type="number" id="h_pr" class="input-dark" placeholder="—">
            <span class="text-[8px] text-gray-600 font-black text-center self-center">PrgR</span>
            <input type="number" id="a_pr" class="input-dark" placeholder="—">
        </div>
        <button onclick="calculate()" class="w-full bg-[#00ff85] text-black py-4 rounded-xl font-black text-xs uppercase tracking-[0.2em] active:scale-95 transition-all">ANALİZ ET & EKLE</button>
    </div>

    <div id="stack" class="space-y-4"></div>

    <div class="fixed bottom-0 left-0 w-full p-4 bg-black/90 backdrop-blur-md border-t border-white/5 flex gap-3">
        <button onclick="resetInp()" class="flex-1 py-3 text-[10px] font-black uppercase text-gray-600 border border-gray-800 rounded-xl">Input Temizle</button>
        <button onclick="resetStack()" class="flex-1 py-3 text-[10px] font-black uppercase text-red-900 border border-red-950/20 rounded-xl">Listeyi Sil</button>
    </div>

    <script>
        const BARAJ = {
            PL: { alt: {xg:0.09, ppa:7.5, sca:18.5, pr:38}, t2: {xg:0.12, ppa:11, sca:25, pr:52} },
            LL: { alt: {xg:0.08, ppa:6.0, sca:16.0, pr:32}, t2: {xg:0.11, ppa:9, sca:22, pr:46} },
            SA: { alt: {xg:0.08, ppa:6.5, sca:15.5, pr:30}, t2: {xg:0.10, ppa:9.5, sca:21, pr:44} },
            BL: { alt: {xg:0.11, ppa:9.0, sca:22.0, pr:45}, t2: {xg:0.14, ppa:13, sca:28, pr:58} },
            L1: { alt: {xg:0.09, ppa:7.0, sca:17.5, pr:34}, t2: {xg:0.11, ppa:10, sca:23, pr:48} }
        };

        let curL = localStorage.getItem('v23_l') || 'PL';

        function save() { ["hT","aT"].forEach(id => localStorage.setItem('v23_'+id, document.getElementById(id).value)); }

        function setL(c, b) {
            curL = c; localStorage.setItem('v23_l', c);
            document.querySelectorAll('.league-btn').forEach(btn => btn.classList.remove('active'));
            b.classList.add('active');
        }

        function calculate() {
            const getV = (h, a) => (parseFloat(document.getElementById(h).value) + parseFloat(document.getElementById(a).value)) / 2;
            const avg = { xg: getV('h_xg','a_xg'), ppa: getV('h_ppa','a_ppa'), sca: getV('h_sca','a_sca'), pr: getV('h_pr','a_pr') };
            if(isNaN(avg.xg)) return;

            const b = BARAJ[curL];
            let warnings = [];
            let score = 0;

            // SINIR KONTROLÜ VE PUANLAMA
            if(avg.xg > b.t2.xg * 1.5) warnings.push("npxG Limit ↑");
            if(avg.pr > b.t2.pr * 1.5) warnings.push("PrgR Limit ↑");

            if(avg.xg > b.alt.xg) score += 1.5; if(avg.xg > b.t2.xg) score += 1.5;
            if(avg.ppa > b.alt.ppa) score += 1; if(avg.ppa > b.t2.ppa) score += 1;
            if(avg.sca > b.alt.sca) score += 1; if(avg.sca > b.t2.sca) score += 1;
            if(avg.pr > b.alt.pr) score += 1; if(avg.pr > b.t2.pr) score += 1;

            let res, p1, p2, p3;
            if(score <= 2.5) { res="1.5 ALT"; p1=80; p2=15; p3=5; }
            else if(score <= 5.5) { res="TAM 2.0"; p1=15; p2=70; p3=15; }
            else { res="TAM 3.0"; p1=5; p2=20; p3=75; }

            const card = `
                <div class="res-card">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center gap-2">
                            <span class="text-[9px] font-black accent-green bg-green-500/10 px-2 py-1 rounded uppercase">${curL}</span>
                            <span class="text-[10px] font-bold uppercase">${document.getElementById('hT').value || 'H'}-${document.getElementById('aT').value || 'A'}</span>
                        </div>
                        <div class="flex gap-2">
                            <div onclick="tgl(this,'w')" class="status-dot dot-w">W</div>
                            <div onclick="tgl(this,'l')" class="status-dot dot-l">L</div>
                            <div onclick="this.closest('.res-card').remove(); svS();" class="status-dot border-none opacity-30 text-lg">×</div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-end mb-2">
                        <div class="text-xs font-black accent-green uppercase tracking-widest italic">${res}</div>
                        <div class="text-[10px] font-black opacity-50">${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%</div>
                    </div>

                    <div class="prob-bar-bg"><div class="prob-bar-fill" style="width:${res == "1.5 ALT" ? p1 : (res == "TAM 2.0" ? p2 : p3)}%"></div></div>

                    <div class="flex justify-between items-center mt-3">
                        <div class="flex flex-col">
                            ${warnings.map(w => `<div class="limit-warn">⚠️ ${w}</div>`).join('')}
                        </div>
                        <div class="text-[7px] text-gray-600 font-bold uppercase text-right leading-tight">
                            1.5A: ${p1}% / T2.0: ${p2}% / T3.0: ${p3}%
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('stack').insertAdjacentHTML('afterbegin', card);
            svS();
        }

        function tgl(b, t) {
            b.parentElement.querySelectorAll('.status-dot').forEach(d => d.classList.remove('active'));
            b.classList.add('active'); svS(); updW();
        }

        function svS() { localStorage.setItem('v23_stack', document.getElementById('stack').innerHTML); }
        function updW() {
            const w = document.querySelectorAll('.dot-w.active').length;
            const t = document.querySelectorAll('.dot-w.active, .dot-l.active').length;
            document.getElementById('wr').innerText = t > 0 ? Math.round((w/t)*100) + "%" : "0%";
        }
        function resetInp() { ["hT","aT","h_xg","a_xg","h_ppa","a_ppa","h_sca","a_sca","h_pr","a_pr"].forEach(id => { document.getElementById(id).value = ""; }); save(); }
        function resetStack() { if(confirm("Silinsin mi?")) { document.getElementById('stack').innerHTML=""; svS(); updW(); } }

        window.onload = () => {
            ["hT","aT"].forEach(id => { const v = localStorage.getItem('v23_'+id); if(v) document.getElementById(id).value = v; });
            document.getElementById('stack').innerHTML = localStorage.getItem('v23_stack') || "";
            updW();
        };
    </script>
</body>
</html>

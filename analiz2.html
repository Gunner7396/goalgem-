<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>B-Tier Pro Lig Analiz - Veri Motoru</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a2e; color: #fff; display: flex; justify-content: center; padding: 20px; }
        .container { background: #16213e; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 450px; }
        h2 { text-align: center; color: #4ecca3; margin-bottom: 25px; border-bottom: 2px solid #4ecca3; padding-bottom: 10px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 14px; color: #adb5bd; }
        select, input { width: 100%; padding: 12px; border-radius: 8px; border: none; background: #0f3460; color: #fff; font-size: 16px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #e94560; border: none; border-radius: 8px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 20px; }
        button:hover { background: #ff4d6d; transform: translateY(-2px); }
        .result { margin-top: 25px; padding: 20px; border-radius: 10px; background: #0f3460; display: none; border-left: 5px solid #4ecca3; }
        .res-item { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 16px; }
        .high { color: #4ecca3; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>B-TIER LIG ANALİZ</h2>
    
    <div class="input-group">
        <label>Lig Seçimi</label>
        <select id="league">
            <option value="ERE">Hollanda Eredivisie (x1.6)</option>
            <option value="BPL">Belçika Pro League (x1.5)</option>
            <option value="TSL">Türkiye Süper Lig (x1.4)</option>
            <option value="CHP">İngiltere Championship (x1.35)</option>
            <option value="POR">Portekiz Liga Portugal (x1.3)</option>
        </select>
    </div>

    <div class="input-group">
        <label>PPA (Ceza Sahasına Giriş - Toplam)</label>
        <input type="number" id="ppa" placeholder="Örn: 18">
    </div>

    <div class="input-group">
        <label>SCA (Şut Aksiyonu - Toplam)</label>
        <input type="number" id="sca" placeholder="Örn: 25">
    </div>

    <div class="input-group">
        <label>PrgR (İlerleme/Taşıma - Toplam)</label>
        <input type="number" id="prgr" placeholder="Örn: 45">
    </div>

    <div class="input-group">
        <label>npxG/Sh (Vuruş Kalitesi - Ort.)</label>
        <input type="number" step="0.01" id="qAvg" placeholder="Örn: 0.10">
    </div>

    <button onclick="calculateBTier()">ANALİZ ET (%80 Güven)</button>

    <div id="resultBox" class="result">
        <div class="res-item"><span>0-1 GOL (p1):</span> <span id="p1" class="high">%0</span></div>
        <div class="res-item"><span>TAM 2 GOL (p2):</span> <span id="p2" class="high">%0</span></div>
        <div class="res-item"><span>3+ GOL (p3):</span> <span id="p3" class="high">%0</span></div>
        <hr style="border: 0.5px solid #16213e;">
        <div id="advice" style="text-align: center; color: #ffbd69; font-weight: bold; margin-top: 10px;"></div>
    </div>
</div>

<script>
function calculateBTier() {
    const lg = document.getElementById('league').value;
    const ppa = parseFloat(document.getElementById('ppa').value);
    const sca = parseFloat(document.getElementById('sca').value);
    const prgr = parseFloat(document.getElementById('prgr').value);
    const q = parseFloat(document.getElementById('qAvg').value);

    let modifier = 1.0;
    let weightPPA = 0.25, weightSCA = 0.25, weightPRGR = 0.25, weightQ = 0.25;

    // LİG ÖZEL AYARLARI (Ağırlıklandırma ve Çarpan)
    if (lg === 'ERE') { modifier = 1.6; weightPPA = 0.40; weightQ = 0.30; }
    else if (lg === 'BPL') { modifier = 1.5; weightPRGR = 0.40; weightPPA = 0.30; }
    else if (lg === 'TSL') { modifier = 1.4; weightSCA = 0.35; weightPPA = 0.35; }
    else if (lg === 'CHP') { modifier = 1.35; weightPRGR = 0.45; weightPPA = 0.25; }
    else if (lg === 'POR') { modifier = 1.3; weightQ = 0.40; weightSCA = 0.30; }

    // Skor Hesaplama (Metriklerin Uyum Kontrolü)
    let baseScore = (ppa * weightPPA + sca * weightSCA + prgr * weightPRGR) * (q * 10);
    let finalScore = baseScore * modifier;

    // Olasılık Dağılımı (Logit Benzetimi)
    let p3 = Math.min(95, (finalScore * 1.8));
    let p1, p2;

    if (p3 > 60) {
        p2 = (100 - p3) * 0.7;
        p1 = 100 - p3 - p2;
    } else if (p3 < 30) {
        p1 = (100 - p3) * 0.6;
        p2 = 100 - p3 - p1;
    } else {
        p1 = (100 - p3) * 0.4;
        p2 = 100 - p3 - p1;
    }

    // Sonuçları Yazdır
    document.getElementById('p1').innerText = `%${p1.toFixed(1)}`;
    document.getElementById('p2').innerText = `%${p2.toFixed(1)}`;
    document.getElementById('p3').innerText = `%${p3.toFixed(1)}`;
    document.getElementById('resultBox').style.display = 'block';

    // Tavsiye Motoru
    let adv = "";
    if (p3 > 75) adv = "YÜKSEK GÜVEN: 2.5 ÜST";
    else if (p1 > 45) adv = "YÜKSEK GÜVEN: 1.5 ALT";
    else if (p2 > 40) adv = "DENGELİ: 2-3 GOL BAREMİ";
    else adv = "RİSKLİ MAÇ: UZAK DUR";
    document.getElementById('advice').innerText = adv;
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>B-Tier Terminal v5</title>
    <style>
        :root {
            --bg: #0b0f15; --card: #161b22; --accent: #00ff88;
            --text: #f0f6fc; --dim: #8b949e;
        }
        .theme-ERE { --accent: #ff4500; } .theme-BPL { --accent: #ffd700; }
        .theme-TSL { --accent: #ff0000; } .theme-CHP { --accent: #00ff88; } .theme-POR { --accent: #00c853; }

        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .container { max-width: 400px; margin: auto; }
        
        /* Giriş Kartı */
        .input-card { background: var(--card); border-radius: 15px; padding: 12px; border: 1px solid #30363d; margin-bottom: 10px; }
        select { width: 100%; background: #0d1117; border: 1px solid var(--accent); color: var(--accent); padding: 8px; border-radius: 8px; font-weight: bold; margin-bottom: 10px; }
        
        .row { display: flex; gap: 6px; margin-bottom: 8px; align-items: center; }
        .row label { flex: 1; font-size: 10px; color: var(--accent); font-weight: bold; }
        input { flex: 1; background: #000; border: 1px solid #30363d; padding: 8px; border-radius: 6px; color: #fff; text-align: center; font-size: 14px; }
        
        .btn-main { width: 100%; background: var(--accent); color: #000; border: none; padding: 12px; border-radius: 10px; font-weight: 900; cursor: pointer; margin-top: 5px; }

        /* Analiz Geçmişi (Liste Yapısı) */
        .history-container { margin-top: 15px; }
        .history-header { display: flex; justify-content: space-between; font-size: 11px; color: var(--dim); padding: 5px; border-bottom: 1px solid #30363d; }
        
        .analysis-item { 
            display: grid; 
            grid-template-columns: 2fr 1fr 1fr 1fr; 
            padding: 10px 5px; 
            border-bottom: 1px solid #21262d; 
            font-size: 12px;
            align-items: center;
        }
        .analysis-item span:first-child { color: var(--accent); font-weight: bold; font-size: 10px; }
        .analysis-item b { text-align: center; }
        
        .btn-clear { background: #f85149; color: white; border: none; padding: 4px 10px; border-radius: 4px; font-size: 10px; cursor: pointer; }
    </style>
</head>
<body class="theme-ERE">

<div class="container">
    <div class="input-card">
        <select id="league" onchange="document.body.className='theme-'+this.value">
            <option value="ERE">ERE (HOLLANDA)</option>
            <option value="BPL">BPL (BELÇİKA)</option>
            <option value="TSL">TSL (TÜRKİYE)</option>
            <option value="CHP">CHP (CHAMPIONSHIP)</option>
            <option value="POR">POR (PORTEKİZ)</option>
        </select>

        <div class="row"><label>NPXG/SH</label><input type="number" id="h_q" step="0.01" inputmode="decimal" placeholder="Ev"><input type="number" id="a_q" step="0.01" inputmode="decimal" placeholder="Dep"></div>
        <div class="row"><label>SCA</label><input type="number" id="h_sca" inputmode="numeric" placeholder="Ev"><input type="number" id="a_sca" inputmode="numeric" placeholder="Dep"></div>
        <div class="row"><label>PRGR</label><input type="number" id="h_prgr" inputmode="numeric" placeholder="Ev"><input type="number" id="a_prgr" inputmode="numeric" placeholder="Dep"></div>
        <div class="row"><label>PPA</label><input type="number" id="h_ppa" inputmode="numeric" placeholder="Ev"><input type="number" id="a_ppa" inputmode="numeric" placeholder="Dep"></div>

        <button class="btn-main" onclick="run()">ANALİZİ LİSTEYE EKLE</button>
    </div>

    <div class="history-container">
        <div class="history-header">
            <span>LİG</span>
            <span>1.5 ALT</span>
            <span>2 GOL</span>
            <span>3 GOL</span>
            <button class="btn-clear" onclick="clearList()">TEMİZLE</button>
        </div>
        <div id="historyList">
            </div>
    </div>
</div>

<script>
function run() {
    const lg = document.getElementById('league').value;
    const h_sca = document.getElementById('h_sca').value;
    if(!h_sca) return;

    // Analiz Motoru Sabit (Önceki Mantık)
    const ppa = (parseFloat(document.getElementById('h_ppa').value)||0) + (parseFloat(document.getElementById('a_ppa').value)||0);
    const sca = (parseFloat(document.getElementById('h_sca').value)||0) + (parseFloat(document.getElementById('a_sca').value)||0);
    const prgr = (parseFloat(document.getElementById('h_prgr').value)||0) + (parseFloat(document.getElementById('a_prgr').value)||0);
    const q = ((parseFloat(document.getElementById('h_q').value)||0.1) + (parseFloat(document.getElementById('a_q').value)||0.1)) / 2;

    let mod = 1.0;
    if (lg === 'ERE') mod = 1.6;
    else if (lg === 'BPL') mod = 1.5;
    else if (lg === 'TSL') mod = 1.4;
    else if (lg === 'CHP') mod = 1.35;
    else if (lg === 'POR') mod = 1.3;

    let score = (ppa * 0.25 + sca * 0.25 + prgr * 0.25) * (q * 10) * mod;
    
    let p3 = Math.min(45, score * 0.55);
    let rem = 100 - p3;
    let p1 = Math.max(5, rem * (1 / (score * 0.3 + 1)) * 2);
    let p2 = 100 - (p1 + p3);

    // Listeye Ekleme
    const list = document.getElementById('historyList');
    const item = document.createElement('div');
    item.className = 'analysis-item';
    item.innerHTML = `
        <span>${lg}</span>
        <b>%${p1.toFixed(0)}</b>
        <b>%${p2.toFixed(0)}</b>
        <b>%${p3.toFixed(0)}</b>
    `;
    list.prepend(item); // En yeni analizi en üste ekler
}

function clearList() {
    if(confirm("Tüm liste silinsin mi?")) {
        document.getElementById('historyList').innerHTML = '';
    }
}
</script>
</body>
</html>

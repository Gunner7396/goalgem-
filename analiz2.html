<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro B-Tier Terminal</title>
    <style>
        :root {
            --bg: #0f172a; --card: #1e293b; --accent: #38bdf8;
            --text: #f8fafc; --input-bg: #0f172a; --border: #334155; --danger: #ef4444;
        }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .app { max-width: 500px; margin: auto; }
        
        .card { background: var(--card); border-radius: 16px; padding: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); margin-bottom: 15px; }
        .section-header { font-size: 11px; font-weight: 800; color: var(--accent); margin-bottom: 10px; display: flex; justify-content: space-between; text-transform: uppercase; }
        
        .input-row { display: flex; gap: 8px; margin-bottom: 12px; align-items: center; }
        .input-row label { flex: 1.5; font-size: 11px; color: #94a3b8; text-transform: uppercase; }
        .input-row input { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid var(--border); background: var(--input-bg); color: #fff; font-size: 15px; text-align: center; }
        
        select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--input-bg); color: #fff; font-size: 14px; margin-bottom: 15px; }
        
        .btn-group { display: flex; gap: 10px; }
        button { flex: 3; padding: 16px; background: var(--accent); border: none; border-radius: 12px; color: var(--bg); font-size: 15px; font-weight: 800; cursor: pointer; }
        .btn-reset { flex: 1; background: var(--danger); color: white; font-size: 12px; }
        button:active { transform: scale(0.95); opacity: 0.8; }

        .results { margin-top: 20px; display: none; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .prob-box { background: rgba(15, 23, 42, 0.7); border-radius: 12px; padding: 12px; border-left: 4px solid var(--accent); margin-bottom: 10px; }
        .prob-item { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 13px; }
        .prob-item b { color: var(--accent); font-size: 15px; }
        .advice { text-align: center; padding: 12px; background: rgba(56, 189, 248, 0.1); border-radius: 10px; border: 1px solid var(--accent); font-weight: bold; font-size: 14px; }
        
        .labels-row { display: flex; gap: 8px; margin-left: auto; width: 55%; justify-content: space-around; font-size: 9px; color: #64748b; margin-bottom: 4px; }
    </style>
</head>
<body>

<div class="app">
    <div class="card">
        <label style="display:block; font-size:10px; margin-bottom:5px; color:#94a3b8;">HEDEF LİG</label>
        <select id="league" onchange="saveData()">
            <option value="ERE">Hollanda Eredivisie (x1.6)</option>
            <option value="BPL">Belçika Pro League (x1.5)</option>
            <option value="TSL">Türkiye Süper Lig (x1.4)</option>
            <option value="CHP">Championship (x1.35)</option>
            <option value="POR">Portekiz Liga Portugal (x1.3)</option>
        </select>

        <div class="labels-row">
            <span>EV SAHİBİ</span>
            <span>DEPLASMAN</span>
        </div>

        <div class="input-row">
            <label>PPA (Giriş)</label>
            <input type="number" id="h_ppa" inputmode="decimal" oninput="saveData()" placeholder="0">
            <input type="number" id="a_ppa" inputmode="decimal" oninput="saveData()" placeholder="0">
        </div>

        <div class="input-row">
            <label>SCA (Aksiyon)</label>
            <input type="number" id="h_sca" inputmode="decimal" oninput="saveData()" placeholder="0">
            <input type="number" id="a_sca" inputmode="decimal" oninput="saveData()" placeholder="0">
        </div>

        <div class="input-row">
            <label>PRGR (İlerleme)</label>
            <input type="number" id="h_prgr" inputmode="decimal" oninput="saveData()" placeholder="0">
            <input type="number" id="a_prgr" inputmode="decimal" oninput="saveData()" placeholder="0">
        </div>

        <div class="input-row">
            <label>NPXG/SH (Kalite)</label>
            <input type="number" step="0.01" id="h_q" inputmode="decimal" oninput="saveData()" placeholder="0.10">
            <input type="number" step="0.01" id="a_q" inputmode="decimal" oninput="saveData()" placeholder="0.10">
        </div>

        <div class="btn-group">
            <button onclick="calculate()">ANALİZ ET</button>
            <button class="btn-reset" onclick="resetForm()">SİL</button>
        </div>

        <div id="results" class="results">
            <div class="prob-box">
                <div class="prob-item"><span>1.5 ALT:</span> <b id="p1">%0</b></div>
                <div class="prob-item"><span>TAM 2 GOL:</span> <b id="p2">%0</b></div>
                <div class="prob-item"><span>TAM 3 GOL:</span> <b id="p3">%0</b></div>
                <div class="prob-item"><span>4+ GOL:</span> <b id="p4">%0</b></div>
            </div>
            <div class="advice" id="adviceText">-</div>
        </div>
    </div>
</div>

<script>
const fields = ['league', 'h_ppa', 'h_sca', 'h_prgr', 'h_q', 'a_ppa', 'a_sca', 'a_prgr', 'a_q'];

function saveData() {
    fields.forEach(f => localStorage.setItem(f, document.getElementById(f).value));
}

function loadData() {
    fields.forEach(f => {
        const val = localStorage.getItem(f);
        if(val) document.getElementById(f).value = val;
    });
    if(localStorage.getItem('h_ppa')) calculate();
}

function resetForm() {
    if(confirm("Tüm veriler silinecek. Emin misin?")) {
        fields.forEach(f => {
            localStorage.removeItem(f);
            document.getElementById(f).value = (f.includes('_q')) ? "0.10" : "";
        });
        document.getElementById('results').style.display = 'none';
    }
}

function calculate() {
    // Boş Veri Kontrolü
    const required = ['h_ppa', 'a_ppa', 'h_sca', 'a_sca'];
    const isEmpty = required.some(id => !document.getElementById(id).value);
    
    if(isEmpty) {
        alert("Lütfen en az PPA ve SCA verilerini giriniz!");
        return;
    }

    const lg = document.getElementById('league').value;
    const ppa = (parseFloat(document.getElementById('h_ppa').value)||0) + (parseFloat(document.getElementById('a_ppa').value)||0);
    const sca = (parseFloat(document.getElementById('h_sca').value)||0) + (parseFloat(document.getElementById('a_sca').value)||0);
    const prgr = (parseFloat(document.getElementById('h_prgr').value)||0) + (parseFloat(document.getElementById('a_prgr').value)||0);
    const q = ((parseFloat(document.getElementById('h_q').value)||0.1) + (parseFloat(document.getElementById('a_q').value)||0.1)) / 2;

    let mod = 1.0;
    let w = { ppa: 0.25, sca: 0.25, prgr: 0.25, q: 0.25 };

    if (lg === 'ERE') { mod = 1.6; w.ppa = 0.45; w.q = 0.30; }
    else if (lg === 'BPL') { mod = 1.5; w.prgr = 0.40; w.ppa = 0.30; }
    else if (lg === 'TSL') { mod = 1.4; w.sca = 0.40; w.ppa = 0.30; }
    else if (lg === 'CHP') { mod = 1.35; w.prgr = 0.50; w.ppa = 0.20; }
    else if (lg === 'POR') { mod = 1.3; w.q = 0.45; w.sca = 0.25; }

    let score = (ppa * w.ppa + sca * w.sca + prgr * w.prgr) * (q * 10) * mod;
    
    let p1, p2, p3, p4;
    p4 = Math.min(45, score * 0.45); 
    p3 = Math.min(40, score * 0.55);
    let rem = 100 - (p3 + p4);
    p1 = Math.max(2, rem * (1 / (score * 0.3 + 1)) * 2);
    p2 = 100 - (p1 + p3 + p4);

    document.getElementById('p1').innerText = `%${p1.toFixed(1)}`;
    document.getElementById('p2').innerText = `%${p2.toFixed(1)}`;
    document.getElementById('p3').innerText = `%${p3.toFixed(1)}`;
    document.getElementById('p4').innerText = `%${p4.toFixed(1)}`;
    
    const adv = document.getElementById('adviceText');
    if (p3 + p4 > 70) adv.innerText = "YÜKSEK GÜVEN: 2.5 ÜST";
    else if (p1 > 40) adv.innerText = "YÜKSEK GÜVEN: 1.5 ALT";
    else adv.innerText = "DENGELİ: 2-3 GOL BAREMİ";

    document.getElementById('results').style.display = 'block';
    saveData();
}

window.onload = loadData;
</script>
</body>
</html>

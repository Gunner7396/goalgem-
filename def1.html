<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VELOCITY SCOUT v18.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #05070a; --card: #0f1216; --border: #1e2530; 
            --text: #f0f3f5; --dim: #8a99af; --l-color: #ff00ff; --success: #00ffa3; --danger: #ff4d4d;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Outfit', sans-serif; outline: none !important; }
        body { background: var(--bg); color: var(--text); margin: 0; padding: 10px; min-height: 100vh; }
        .wrapper { width: 100%; max-width: 380px; margin: 0 auto; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .header h1 { font-size: 18px; font-weight: 900; color: var(--l-color); margin: 0; }
        
        .dash { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
        .stat-box { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 6px; text-align: center; }
        .st-v { font-family: 'JetBrains Mono'; font-size: 14px; font-weight: 700; color: #fff; }
        .st-l { font-size: 7px; color: var(--dim); text-transform: uppercase; display: block; }

        .engine { background: var(--card); border-radius: 15px; padding: 12px; border: 1px solid var(--border); margin-bottom: 15px; border-top: 3px solid var(--l-color); }
        .row-label { font-size: 10px; font-weight: 900; color: var(--l-color); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .row-label::after { content: ""; flex: 1; height: 1px; background: linear-gradient(90deg, var(--border), transparent); }
        
        .dual-id { display: grid; grid-template-columns: 1fr 20px 1fr; align-items: center; gap: 5px; margin-bottom: 12px; }
        .id-unit { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 8px; padding: 8px; }
        .id-input { width: 100%; background: transparent; border: none; color: #fff; font-weight: 800; font-size: 12px; text-transform: uppercase; text-align: center; }

        .input-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 10px; }
        .unit { background: rgba(0,0,0,0.2); border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; }
        .u-label { font-size: 7px; color: var(--dim); font-weight: 800; display: block; }
        .u-input { width: 100%; background: transparent; border: none; color: #fff; font-family: 'JetBrains Mono'; font-size: 15px; font-weight: 700; }
        
        .scan-btn { width: 100%; background: var(--l-color); color: #000; border: none; padding: 14px; border-radius: 10px; font-weight: 900; font-size: 14px; cursor: pointer; transition: 0.3s; }
        .scan-btn:active { transform: scale(0.95); opacity: 0.8; }

        .report-card { 
            background: #111418; border: 1px solid var(--border); border-radius: 12px; 
            padding: 10px; margin-top: 10px; display: grid; grid-template-columns: 45px 1fr 80px; align-items: center; gap: 10px;
            border-left: 3px solid var(--l-color); animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .rep-score { height: 40px; width: 40px; border-radius: 8px; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-family: 'JetBrains Mono'; font-size: 13px; font-weight: 700; color: var(--l-color); }
        .team-display { font-size: 11px; font-weight: 900; color: #fff; text-transform: uppercase; margin:0; }
        .mini-btn { flex: 1; background: #1a1f26; border: 1px solid var(--border); font-size: 14px; padding: 8px 0; border-radius: 6px; cursor: pointer; color: #fff; }

        .archive-item { 
            background: #0d1117; border: 1px solid var(--border); padding: 8px 12px; 
            border-radius: 10px; margin-bottom: 6px; display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 10px;
        }
        .arch-score-box { background: var(--border); color: var(--success); font-family: 'JetBrains Mono'; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: 800; }
    </style>
</head>
<body class="theme-eng">

<div class="wrapper">
    <div class="header">
        <h1>VELOCITY SCOUT</h1>
        <div style="font-size: 7px; color: var(--dim); cursor:pointer;" onclick="clearAll()">DB RESET</div>
    </div>

    <div class="dash">
        <div class="stat-box"><span class="st-v" id="st-total">0</span><span class="st-l">Analiz</span></div>
        <div class="stat-box"><span class="st-v" id="st-rate">%0</span><span class="st-l">Ba≈üarƒ±</span></div>
        <div class="stat-box"><span class="st-v" id="st-hit">0</span><span class="st-l">Ar≈üiv</span></div>
    </div>

    <div class="engine">
        <select id="league-select" onchange="updateTeams()" style="width:100%; background:none; border:none; color:#fff; font-weight:700; margin-bottom:12px; font-size: 13px; border-bottom: 1px solid var(--border);">
            <option value="ENG">PREMIER LEAGUE (ƒ∞NG)</option>
            <option value="ESP">LA LIGA (ƒ∞SP)</option>
            <option value="ITA">SERIE A (ƒ∞TA)</option>
            <option value="GER">BUNDESLIGA (ALM)</option>
            <option value="FRA">LIGUE 1 (FRA)</option>
        </select>

        <div class="dual-id">
            <div class="id-unit"><input list="team-list" id="v-team-h" class="id-input" placeholder="EV"></div>
            <div style="font-size: 9px; color: var(--dim); text-align:center;">VS</div>
            <div class="id-unit"><input list="team-list" id="v-team-a" class="id-input" placeholder="DEP"></div>
            <datalist id="team-list"></datalist>
        </div>

        <div class="row-label">DEFENCE CRISIS (A)</div>
        <div class="input-grid">
            <div class="unit"><span class="u-label">Save%</span><input type="number" id="v-save" class="u-input" placeholder="0"></div>
            <div class="unit"><span class="u-label">PPA (A)</span><input type="number" id="v-ppa-a" class="u-input" placeholder="0"></div>
            <div class="unit" style="grid-column: span 2;"><span class="u-label">SCA (A)</span><input type="number" id="v-sca-a" class="u-input" placeholder="0"></div>
        </div>

        <div class="row-label">OFFENSIVE (F)</div>
        <div class="input-grid">
            <div class="unit"><span class="u-label">PPA (F)</span><input type="number" id="v-ppa-f" class="u-input" placeholder="0"></div>
            <div class="unit"><span class="u-label">npxG/Sh</span><input type="number" id="v-npx" class="u-input" step="0.01" placeholder="0.00"></div>
        </div>
        <button class="scan-btn" onclick="analyze()">ANALƒ∞Zƒ∞ BA≈ûLAT</button>
    </div>

    <div id="feed"></div>
    <div class="archive-section">
        <h2 style="font-size: 10px; color: var(--success); margin: 20px 0 10px 0;">‚úÖ ANALƒ∞Z GE√áMƒ∞≈ûƒ∞</h2>
        <div id="archive-list"></div>
    </div>
</div>

<script>
    // KRƒ∞Tƒ∞K Lƒ∞G E≈ûƒ∞KLERƒ∞ (SAVUNMA √á√ñK√ú≈û NOKTALARI)
    const leagueThresholds = {
        ENG: { ppaA: 13.5, scaA: 25.0, save: 67, ppaF: 12.0, npx: 0.11 },
        ESP: { ppaA: 11.0, scaA: 21.0, save: 70, ppaF: 10.5, npx: 0.10 },
        ITA: { ppaA: 9.5,  scaA: 19.5, save: 72, ppaF: 9.0,  npx: 0.09 },
        GER: { ppaA: 15.0, scaA: 28.0, save: 65, ppaF: 13.0, npx: 0.13 },
        FRA: { ppaA: 12.5, scaA: 23.0, save: 69, ppaF: 11.5, npx: 0.11 }
    };

    const leagueTeams = {
        ENG: ["Arsenal", "Aston Villa", "Bournemouth", "Brentford", "Brighton", "Chelsea", "Crystal Palace", "Everton", "Fullham", "Ipswich", "Leicester", "Liverpool", "Man City", "Man Utd", "Newcastle", "Forest", "Southampton", "Tottenham", "West Ham", "Wolves"],
        ESP: ["Alaves", "Bilbao", "Atletico", "Barcelona", "Celta", "Espanyol", "Getafe", "Girona", "Las Palmas", "Leganes", "Mallorca", "Osasuna", "Vallecano", "Betis", "Real Madrid", "Sociedad", "Sevilla", "Valencia", "Valladolid", "Villarreal"],
        ITA: ["Atalanta", "Bologna", "Cagliari", "Como", "Empoli", "Fiorentina", "Genoa", "Inter", "Juventus", "Lazio", "Lecce", "Milan", "Monza", "Napoli", "Parma", "Roma", "Torino", "Udinese", "Venezia", "Verona"],
        GER: ["Augsburg", "Leverkusen", "Bayern", "Bochum", "Dortmund", "Frankfurt", "Heidenheim", "St. Pauli", "Freiburg", "Holstein", "Mainz", "Gladbach", "Leipzig", "Stuttgart", "Union Berlin", "Bremen", "Wolfsburg"],
        FRA: ["Angers", "Auxerre", "Brest", "Le Havre", "Lens", "Lille", "Lyon", "Marseille", "Monaco", "Montpellier", "Nantes", "Nice", "PSG", "Reims", "Rennes", "St-Etienne", "Strasbourg", "Toulouse"]
    };

    let stats = JSON.parse(localStorage.getItem('v18_stats')) || { total: 0, wins: 0 };
    let archive = JSON.parse(localStorage.getItem('v18_archive')) || [];

    function updateTeams() {
        const l = document.getElementById('league-select').value;
        document.body.className = 'theme-' + l.toLowerCase();
        document.getElementById('team-list').innerHTML = leagueTeams[l].map(t => `<option value="${t}">`).join('');
    }

    function analyze() {
        const l = document.getElementById('league-select').value;
        const T = leagueThresholds[l];
        
        const d = {
            save: parseFloat(document.getElementById('v-save').value || 0),
            ppaA: parseFloat(document.getElementById('v-ppa-a').value || 0),
            scaA: parseFloat(document.getElementById('v-sca-a').value || 0),
            ppaF: parseFloat(document.getElementById('v-ppa-f').value || 0),
            npx: parseFloat(document.getElementById('v-npx').value || 0)
        };

        if(!d.save || !d.ppaA) return;

        // √á√ñK√ú≈û ANALƒ∞Zƒ∞ (Savunma k√∂t√ºle≈ütik√ße skor y√ºkselir)
        let score = 40; 
        
        // Bu veriler e≈üiƒüi (Threshold) a≈ütƒ±ƒüƒ± oranda "Fƒ±rsat Y√ºzdesi" artar
        score += (d.ppaA - T.ppaA) * 5.0; // PPA yedik√ße puan artar
        score += (d.scaA - T.scaA) * 3.0; // SCA verdik√ße puan artar
        score += (T.save - d.save) * 1.5; // Kaleci d√º≈üt√ºk√ße puan artar
        
        // H√ºcumda da biraz ƒ±≈üƒ±k varsa (npxG) ihtimal iyice peki≈üir
        score += (d.npx - T.npx) * 100;

        const matchPct = Math.max(10, Math.min(99, Math.round(score)));

        const id = Date.now();
        const card = document.createElement('div');
        card.className = `report-card`; card.id = `rep-${id}`;
        card.innerHTML = `
            <div class="rep-score">${matchPct}%</div>
            <div class="rep-info">
                <p class="team-display">${document.getElementById('v-team-h').value || 'EV'} - ${document.getElementById('v-team-a').value || 'DEP'}</p>
                <p style="font-size:8px; color:var(--dim); margin:0;">${l} KRƒ∞Z E≈ûƒ∞ƒûƒ∞ ANALƒ∞Zƒ∞</p>
            </div>
            <div class="rep-actions">
                <button class="mini-btn" onclick="moveToArchive('${id}', '${document.getElementById('v-team-h').value}', '${document.getElementById('v-team-a').value}', ${matchPct})">‚úÖ</button>
                <button class="mini-btn" onclick="this.parentElement.parentElement.remove()">‚ùå</button>
            </div>`;
        document.getElementById('feed').prepend(card);
    }

    function moveToArchive(id, h, a, pct) {
        const l = document.getElementById('league-select').value;
        archive.unshift({ id, teams: `${h} - ${a}`, pct, league: l, date: new Date().toLocaleDateString('tr-TR'), res: "MS?" });
        stats.total++; stats.wins++; saveAndRefresh();
        if(document.getElementById(`rep-${id}`)) document.getElementById(`rep-${id}`).remove();
    }

    function updateScore(id) {
        const s = prompt("Sonu√ß:");
        if(s) { archive[archive.findIndex(i => i.id == id)].res = s; saveAndRefresh(); }
    }

    function deleteItem(id) { if(confirm("Silsin mi?")) { archive = archive.filter(i => i.id != id); saveAndRefresh(); } }
    
    function saveAndRefresh() {
        localStorage.setItem('v18_stats', JSON.stringify(stats));
        localStorage.setItem('v18_archive', JSON.stringify(archive));
        renderArchive(); updateUI();
    }

    function renderArchive() {
        document.getElementById('archive-list').innerHTML = archive.map(i => `
            <div class="archive-item">
                <div onclick="updateScore(${i.id})">
                    <span style="font-size:7px; background:#1a1f26; padding:2px 4px; border-radius:3px; color:var(--dim); margin-right:5px;">${i.league}</span>
                    <span style="font-size:10px; font-weight:900; color:var(--success);">${i.teams}</span><br>
                    <span style="font-size:8px; color:var(--dim);">%${i.pct} Fƒ±rsat ‚Ä¢ ${i.date}</span>
                </div>
                <div class="arch-score-box" onclick="updateScore(${i.id})">${i.res}</div>
                <div style="color:var(--danger); cursor:pointer;" onclick="deleteItem(${i.id})">üóëÔ∏è</div>
            </div>`).join('');
    }

    function updateUI() {
        document.getElementById('st-total').innerText = stats.total;
        document.getElementById('st-hit').innerText = archive.length;
        const rate = stats.total === 0 ? 0 : Math.round((stats.wins / stats.total) * 100);
        document.getElementById('st-rate').innerText = '%' + rate;
    }

    function clearAll() { if(confirm("T√úM√ú Sƒ∞Lƒ∞NSƒ∞N Mƒ∞?")) { localStorage.clear(); location.reload(); } }
    window.onload = () => { updateTeams(); renderArchive(); updateUI(); };
</script>
</body>
</html>

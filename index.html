<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoalGem</title>
    <style>
        :root {
            --bg: #0f172a; --card: #1e293b; --accent: #38bdf8;
            --green: #10b981; --red: #f43f5e; --text: #f1f5f9;
        }
        body {
            font-family: sans-serif; background: var(--bg); color: var(--text);
            margin: 0; padding: 10px; display: flex; justify-content: center;
        }
        .container { width: 100%; max-width: 450px; background: var(--card); padding: 15px; border-radius: 12px; }
        .header { text-align: center; margin-bottom: 10px; }
        .header h1 { color: var(--accent); margin: 0; font-size: 1.4rem; }
        .header p { font-size: 0.7rem; opacity: 0.7; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .team-box { background: #0f172a; padding: 10px; border-radius: 8px; border: 1px solid #334155; }
        
        .field { margin-bottom: 6px; }
        label { display: block; font-size: 0.65rem; color: #94a3b8; margin-bottom: 1px; }
        input {
            width: 100%; background: #1e293b; border: 1px solid #475569;
            color: white; padding: 4px 6px; border-radius: 4px; font-size: 0.75rem; box-sizing: border-box;
        }
        .name-input { border-color: var(--accent); margin-bottom: 8px; font-weight: bold; }

        .btns { display: flex; gap: 8px; margin: 15px 0; }
        button { flex: 1; padding: 10px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; font-size: 0.8rem; }
        .analyze { background: var(--green); color: white; }
        .clear { background: var(--red); color: white; }

        #res {
            padding: 10px; border-radius: 6px; text-align: center; 
            display: none; font-size: 0.85rem; margin-bottom: 10px;
        }

        .history { border-top: 1px solid #334155; padding-top: 10px; max-height: 200px; overflow-y: auto; }
        table { width: 100%; font-size: 0.7rem; border-collapse: collapse; }
        th { text-align: left; color: var(--accent); padding: 4px; border-bottom: 1px solid #334155; }
        td { padding: 6px 4px; border-bottom: 1px solid #0f172a; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>GoalGem</h1>
        <p>HVP & Savunma Analiz Paneli</p>
    </div>

    <div class="grid">
        <div class="team-box" id="A">
            <input type="text" class="t-name name-input" placeholder="A Takımı">
            <div class="field"><label>npxG</label><input type="number" step="0.1" class="npxG"></div>
            <div class="field"><label>G-xG</label><input type="number" step="0.1" class="GxG"></div>
            <div class="field"><label>Touches Box</label><input type="number" class="tib"></div>
            <div class="field"><label>PrgP+C</label><input type="number" class="prg"></div>
            <div class="field"><label>Direct Spd</label><input type="number" step="0.1" class="ds"></div>
            <div class="field"><label>Def. Line</label><input type="number" class="dl"></div>
        </div>

        <div class="team-box" id="B">
            <input type="text" class="t-name name-input" placeholder="B Takımı">
            <div class="field"><label>npxG</label><input type="number" step="0.1" class="npxG"></div>
            <div class="field"><label>G-xG</label><input type="number" step="0.1" class="GxG"></div>
            <div class="field"><label>Touches Box</label><input type="number" class="tib"></div>
            <div class="field"><label>PrgP+C</label><input type="number" class="prg"></div>
            <div class="field"><label>Direct Spd</label><input type="number" step="0.1" class="ds"></div>
            <div class="field"><label>Def. Line</label><input type="number" class="dl"></div>
        </div>
    </div>

    <div class="btns">
        <button class="analyze" onclick="run()">ANALİZ ET</button>
        <button class="clear" onclick="reset()">TEMİZLE</button>
    </div>

    <div id="res"></div>

    <div class="history">
        <table>
            <thead><tr><th>Maç</th><th>HVP</th><th>%</th><th>Skor</th></tr></thead>
            <tbody id="hist"></tbody>
        </table>
    </div>
</div>

<script>
    function run() {
        const get = (id) => ({
            name: document.querySelector(`#${id} .t-name`).value || id,
            npxG: parseFloat(document.querySelector(`#${id} .npxG`).value) || 0,
            GxG: parseFloat(document.querySelector(`#${id} .GxG`).value) || 0,
            tib: parseFloat(document.querySelector(`#${id} .tib`).value) || 0,
            prg: parseFloat(document.querySelector(`#${id} .prg`).value) || 0,
            ds: parseFloat(document.querySelector(`#${id} .ds`).value) || 0,
            dl: parseFloat(document.querySelector(`#${id} .dl`).value) || 0
        });

        const a = get('A'), b = get('B');
        const hvp = (t) => ((t.npxG * 2) + t.prg) / 10 + t.GxG;
        const hA = hvp(a), hB = hvp(b);
        const avgH = (hA + hB) / 2;

        let pct = 10; // Taban ihtimal
        if ((a.npxG + b.npxG) > 2.3) pct += 30;
        if ((a.tib + b.tib) > 40) pct += 20;
        if (a.ds > 1.8 || b.ds > 1.8) pct += 15;
        if (a.dl > 45 || b.dl > 45) pct += 15;
        if (avgH > 1.5) pct += 10;
        if (pct > 95) pct = 95;

        const r = document.getElementById('res');
        r.style.display = 'block';
        r.style.background = pct >= 70 ? '#064e3b' : '#450a0a';
        r.innerHTML = `<b>${a.name} - ${b.name}</b><br>Üst İhtimali: %${pct} | HVP: ${avgH.toFixed(2)}`;

        const h = document.getElementById('hist');
        const row = h.insertRow(0);
        row.innerHTML = `<td>${a.name.slice(0,3)}-${b.name.slice(0,3)}</td><td>${avgH.toFixed(2)}</td><td>%${pct}</td><td>${pct>=70?'✅':'❌'}</td>`;
    }

    function reset() {
        document.querySelectorAll('input').forEach(i => i.value = '');
        document.getElementById('res').style.display = 'none';
    }
</script>
</body>
</html>

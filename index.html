<script>
    function analyze() {
        const v = (id) => parseFloat(document.getElementById(id).value.replace(',', '.')) || 0;
        
        // GÜÇ HESAPLAMA (v4.3 Keskinleştirilmiş)
        const hP = (v('hG')*2.5) + (v('hB')*0.4) + (v('hS')*0.2) + (v('hT')*0.1);
        const aP = (v('aG')*2.5) + (v('aB')*0.4) + (v('aS')*0.2) + (v('aT')*0.1);
        
        const hD = (v('hGA')*1.5 || 1.2) - (v('hIN')*0.1); // Savunma direnci
        const aD = (v('aGA')*1.5 || 1.2) - (v('aIN')*0.1);

        // SKOR SİMÜLASYONU (Ham puanı gerçek skora çevirir)
        let hScore = Math.round((hP / (aD + 2)) * 0.8);
        let aScore = Math.round((aP / (hD + 2)) * 0.8);
        
        // Olasılık Hesaplama
        const total = hP + aP;
        const hWinProb = Math.round((hP / total) * 100);
        const aWinProb = 100 - hWinProb;

        document.getElementById('res').style.display = 'block';
        document.getElementById('scr').innerHTML = `
            <div style="font-size:16px; color:#888; margin-bottom:10px;">BEKLENEN SKOR</div>
            <div style="display:flex; justify-content:center; align-items:center; gap:20px;">
                <span style="color:#28a745">${hScore}</span>
                <span style="color:#444">-</span>
                <span style="color:#dc3545">${aScore}</span>
            </div>
        `;
        
        document.getElementById('tag').innerHTML = `
            <div style="width:100%; background:#1f2937; height:12px; border-radius:10px; overflow:hidden; display:flex; margin-bottom:10px;">
                <div style="width:${hWinProb}%; background:#28a745;"></div>
                <div style="width:${aWinProb}%; background:#dc3545;"></div>
            </div>
            <div style="display:flex; justify-content:space-between; font-size:12px;">
                <span>EV: %${hWinProb}</span>
                <span>DEP: %${aWinProb}</span>
            </div>
        `;

        document.getElementById('desc').innerHTML = `
            <div style="margin-top:15px; border-top:1px solid #333; padding-top:10px;">
                <b>TAHMİN:</b> ${hScore > aScore ? 'Ev Sahibi Galibiyeti' : (aScore > hScore ? 'Deplasman Galibiyeti' : 'Beraberlik / KG Var')} <br>
                <b>GÜVEN:</b> %${Math.abs(hWinProb - 50) + 50} <br>
                <small style="color:#555;">*Kolektif veriler ışığında maçın muhtemel senaryosudur.</small>
            </div>
        `;
    }
</script>

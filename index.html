<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analiz Motoru - Smart & Clean</title>
    <style>
        :root { --accent: #00ff88; --bg: #0b0f1a; --card: #161e2d; --reset: #4b5563; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: #f3f4f6; margin: 0; padding: 10px; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; border: 1px solid #1f2937; margin-bottom: 10px; }
        textarea { width: 100%; height: 60px; background: #000; color: var(--accent); border: 1px solid #333; border-radius: 8px; padding: 10px; font-size: 11px; outline: none; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 6px; box-sizing: border-box; font-size: 14px; margin-bottom: 5px; outline: none; }
        input:focus { border-color: var(--accent); }
        label { font-size: 10px; color: #9ca3af; display: block; }
        .btn-main { width: 100%; padding: 15px; background: var(--accent); border: none; border-radius: 10px; color: #000; font-weight: 800; cursor: pointer; margin-top: 5px; font-size: 16px; }
        .btn-reset { width: 100%; padding: 12px; background: var(--reset); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 12px; }
        .result-box { margin-top: 20px; padding: 20px; background: #1f2937; border-radius: 15px; text-align: center; border: 2px solid var(--accent); display:none; }
        .skor { font-size: 42px; font-weight: 900; }
    </style>
</head>
<body>

    <div class="card">
        <h4 style="margin:0 0 10px 0; color:var(--accent)">1. VERƒ∞ AKTARIMI</h4>
        <textarea id="bulkData" placeholder="FBref satƒ±rƒ±nƒ± buraya yapƒ±≈ütƒ±r..."></textarea>
        <div style="display:flex; gap:5px; margin-top:10px;">
            <button onclick="smartParse('e_')" style="background:#3b82f6; color:white; flex:1; padding:10px; border:none; border-radius:6px; cursor:pointer;">EV'E AKTAR</button>
            <button onclick="smartParse('d_')" style="background:#ef4444; color:white; flex:1; padding:10px; border:none; border-radius:6px; cursor:pointer;">DEP'E AKTAR</button>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <h4 style="font-size:10px; margin-top:0;">EV SAHƒ∞Bƒ∞</h4>
            <label>npxG (H√ºcum)</label><input type="number" id="e_npxg" step="0.01" class="input-field">
            <label>npxGA (Savunma)</label><input type="number" id="e_npxga" step="0.01" class="input-field">
            <label>Tilt%</label><input type="number" id="e_tilt" value="50" class="input-field">
            <label>SCA</label><input type="number" id="e_sca" value="15" class="input-field">
        </div>
        <div class="card">
            <h4 style="font-size:10px; margin-top:0;">DEPLASMAN</h4>
            <label>npxG (H√ºcum)</label><input type="number" id="d_npxg" step="0.01" class="input-field">
            <label>npxGA (Savunma)</label><input type="number" id="d_npxga" step="0.01" class="input-field">
            <label>Tilt%</label><input type="number" id="d_tilt" value="50" class="input-field">
            <label>SCA</label><input type="number" id="d_sca" value="15" class="input-field">
        </div>
    </div>

    <button class="btn-main" onclick="finalHesapla()">√áARPI≈ûTIR VE ANALƒ∞Z ET</button>
    <button class="btn-reset" onclick="ekraniSifirla()">‚ùå T√úM VERƒ∞LERƒ∞ SIFIRLA</button>

    <div id="sonucBox" class="result-box">
        <div id="skorDisplay" class="skor">0.0 - 0.0</div>
        <div id="oranDisplay" style="margin-top:10px; font-weight:bold; color:var(--accent)"></div>
    </div>

<script>
function smartParse(prefix) {
    const raw = document.getElementById('bulkData').value;
    const nums = raw.match(/\d+(\.\d+)?/g);
    
    if (!nums || nums.length < 5) {
        alert("Ge√ßerli bir veri bulunamadƒ±."); return;
    }

    let bulunanVal = 0;
    // FBref'ten gelen npxG genelde 0.5 ile 4.0 arasƒ±ndadƒ±r.
    for (let n of nums) {
        let val = parseFloat(n);
        if (val > 0.4 && val < 4.0) {
            bulunanVal = val;
            break;
        }
    }

    if (raw.toLowerCase().includes("opponent")) {
        document.getElementById(prefix + 'npxga').value = bulunanVal;
    } else {
        document.getElementById(prefix + 'npxg').value = bulunanVal;
    }
    
    document.getElementById('bulkData').value = "";
}

function ekraniSifirla() {
    if(confirm("T√ºm veriler temizlenecek. Emin misin?")) {
        // T√ºm inputlarƒ± temizle
        const inputs = document.getElementsByClassName('input-field');
        for (let i = 0; i < inputs.length; i++) {
            // Tilt ve SCA i√ßin varsayƒ±lan deƒüerleri geri y√ºkle, diƒüerlerini bo≈üalt
            if(inputs[i].id.includes('tilt')) inputs[i].value = 50;
            else if(inputs[i].id.includes('sca')) inputs[i].value = 15;
            else inputs[i].value = "";
        }
        // Sonu√ß kutusunu gizle
        document.getElementById('sonucBox').style.display = 'none';
        document.getElementById('bulkData').value = "";
    }
}

function finalHesapla() {
    const v = (id) => parseFloat(document.getElementById(id).value) || 0;
    let evGol = (v('e_npxg') + v('d_npxga')) / 2;
    let depGol = (v('d_npxg') + v('e_npxga')) / 2;
    evGol *= 1.05;

    document.getElementById('sonucBox').style.display = 'block';
    document.getElementById('skorDisplay').innerText = evGol.toFixed(1) + " - " + depGol.toFixed(1);
    
    let toplam = evGol + depGol;
    document.getElementById('oranDisplay').innerText = toplam > 2.5 ? "üî• 2.5 √úST POTANSƒ∞YELƒ∞" : "üõ°Ô∏è ALT/DENGELƒ∞ MA√á";
}
</script>
</body>
</html>

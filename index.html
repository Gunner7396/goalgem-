<style>
    .insight-card { background: #05070a; padding: 12px; border-radius: 10px; margin-top: 15px; border-left: 3px solid var(--primary); }
    .tag { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: bold; margin-bottom: 8px; text-transform: uppercase; }
    .tag-blue { background: rgba(0, 163, 255, 0.2); color: var(--primary); }
    .tag-green { background: rgba(40, 167, 69, 0.2); color: var(--success); }
    .confidence-meter { height: 4px; background: #1a2234; border-radius: 2px; margin-top: 5px; }
    .confidence-fill { height: 100%; background: var(--primary); width: 0%; transition: width 1.5s; }
</style>

<div id="res" class="card res-box">
    <div class="score-display">
        <div class="score-num"><span id="hScr">0</span> - <span id="aScr">0</span></div>
        <div id="scenarioTag" class="tag tag-blue">Analiz Ediliyor...</div>
    </div>
    
    <div id="statBars"></div> 

    <div class="insight-card">
        <div style="font-size: 11px; color: #94a3b8;">TAHMİN GÜVEN ENDEKSİ</div>
        <div class="confidence-meter"><div id="confFill" class="confidence-fill"></div></div>
        
        <div style="margin-top:15px;">
            <div id="mainPick" style="font-weight: 800; font-size: 15px; color: #fff;"></div>
            <div id="sidePick" style="font-size: 12px; color: #94a3b8; margin-top: 4px;"></div>
        </div>
    </div>
</div>

<script>
function analyze() {
    // ... (v5.5'teki hücum/savunma hesaplama kodları burada devam eder) ...
    const v = (id) => parseFloat(document.getElementById(id).value.replace(',', '.')) || 0;
    let hAtk = (v('hG') * 20) + (v('hS') * 0.8) + (v('hB') * 0.5);
    let aAtk = (v('aG') * 20) + (v('aS') * 0.8) + (v('aB') * 0.5);
    let hDef = (v('hIN') * 2.5) + (v('hT') * 0.5) - (v('hGA') * 5);
    let aDef = (v('aIN') * 2.5) + (v('aT') * 0.5) - (v('aGA') * 5);

    // 1. Senaryo Belirleme
    let scenario = "";
    if (Math.abs(hAtk - aAtk) < 15) scenario = "Dengeli Mücadele";
    else if (hAtk > aAtk + 30) scenario = "Ev Sahibi Dominasyonu";
    else if (aAtk > hAtk + 30) scenario = "Deplasman Baskısı";
    else scenario = "Taktiksel Savaş";
    document.getElementById('scenarioTag').innerText = scenario;

    // 2. Güven Endeksi (xG farkı ve Defans gücüne göre)
    let confidence = Math.min(95, Math.abs(hAtk - aAtk) + (hDef / 2));
    document.getElementById('confFill').style.width = confidence + "%";

    // 3. Skor ve Tahmin Mantığı
    let fH = Math.round((hAtk / 22) - (aDef / 45));
    let fA = Math.round((aAtk / 22) - (hDef / 45));
    // Sınırlandırmalar
    fH = Math.max(0, Math.min(4, fH)); fA = Math.max(0, Math.min(4, fA));
    
    document.getElementById('hScr').innerText = fH;
    document.getElementById('aScr').innerText = fA;

    // Profesyonel Tavsiyeler
    let pick = (fH > fA) ? "MS 1" : (fA > fH ? "MS 2" : "KG VAR / X");
    document.getElementById('mainPick').innerText = "ANA TERCİH: " + pick;
    
    let side = "";
    if (v('hT') > 60 || v('aT') > 60) side = "Korner Bahisleri Uygundur";
    else if (fH + fA < 2) side = "2.5 Alt / Kısır Maç";
    else side = "Karşılıklı Gol Şansı Yüksek";
    document.getElementById('sidePick').innerText = "EKSTRA: " + side;

    document.getElementById('res').style.display = 'block';
}
</script>

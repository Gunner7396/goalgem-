<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuantum Analiz v3</title>
    <style>
        :root { --bg: #0b0f1a; --card: #161b2a; --accent: #38bdf8; --text: #e2e8f0; --danger: #ef4444; --success: #22c55e; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 800px; background: var(--card); padding: 15px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full { grid-column: span 2; }
        h3 { margin: 0 0 10px 0; font-size: 1rem; color: var(--accent); border-bottom: 1px solid #2d3748; }
        label { display: block; font-size: 0.75rem; margin-bottom: 3px; opacity: 0.8; }
        input, select { width: 100%; padding: 10px; background: #1a202e; border: 1px solid #2d3748; color: #fff; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        .btn { width: 100%; padding: 15px; background: var(--accent); border: none; font-weight: bold; border-radius: 6px; cursor: pointer; margin-top: 10px; }
        #result { margin-top: 15px; padding: 15px; background: #0f172a; border-radius: 8px; display: none; border-left: 4px solid var(--accent); }
        .scroll-area { max-height: 150px; overflow-y: auto; font-size: 0.85rem; padding-right: 5px; margin-top: 10px; border-top: 1px solid #2d3748; }
        .score-box { text-align: center; font-size: 2.5rem; font-weight: 800; }
        .league-tag { font-size: 0.7rem; background: #2d3748; padding: 2px 8px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <div class="grid">
        <div class="full">
            <select id="league">
                <option value="ita">Ä°talya Serie A</option>
                <option value="esp">Ä°spanya La Liga</option>
                <option value="fra">Fransa Ligue 1</option>
                <option value="eng">Ä°ngiltere Premier League</option>
                <option value="ger">Almanya Bundesliga</option>
            </select>
        </div>

        <div class="team-box">
            <h3>Ev Sahibi</h3>
            <label>npxG/Sh</label>
            <input type="number" id="a_npxg" inputmode="decimal" step="0.001">
            <label>PPA</label>
            <input type="number" id="a_ppa" inputmode="decimal" step="0.1">
            <label>Mid-Tkl</label>
            <input type="number" id="a_tkl" inputmode="decimal">
            <label>PrgC</label>
            <input type="number" id="a_prgc" inputmode="decimal">
            <label>Set-Piece xG</label>
            <input type="number" id="a_spx" inputmode="decimal" step="0.01" placeholder="Duran Top xG">
        </div>

        <div class="team-box">
            <h3>Deplasman</h3>
            <label>npxG/Sh</label>
            <input type="number" id="b_npxg" inputmode="decimal" step="0.001">
            <label>PPA</label>
            <input type="number" id="b_ppa" inputmode="decimal" step="0.1">
            <label>Mid-Tkl</label>
            <input type="number" id="b_tkl" inputmode="decimal">
            <label>PrgC</label>
            <input type="number" id="b_prgc" inputmode="decimal">
            <label>Set-Piece xG Yeme</label>
            <input type="number" id="b_spx_ag" inputmode="decimal" step="0.01" placeholder="Duran Top xG Yeme">
        </div>

        <div class="full">
            <label>Field Tilt %</label>
            <input type="number" id="tilt" inputmode="decimal" value="50">
        </div>

        <button class="btn" onclick="analizEt()">ANALÄ°Z ET</button>

        <div id="result">
            <div class="league-tag" id="res_league"></div>
            <div class="score-box" id="res_score">%0</div>
            <div class="scroll-area" id="res_details"></div>
        </div>
    </div>
</div>

<script>
const configs = {
    ita: { n: "Serie A", npxg: 0.08, ppa: 8.0, tkl: 22, prgc: 12, sp: 0.30 },
    esp: { n: "La Liga", npxg: 0.08, ppa: 7.5, tkl: 24, prgc: 11, sp: 0.28 },
    fra: { n: "Ligue 1", npxg: 0.08, ppa: 7.5, tkl: 25, prgc: 12, sp: 0.25 },
    eng: { n: "EPL", npxg: 0.075, ppa: 8.5, tkl: 28, prgc: 14, sp: 0.35 },
    ger: { n: "Bundesliga", npxg: 0.07, ppa: 6.5, tkl: 30, prgc: 10, sp: 0.32 }
};

function analizEt() {
    const lKey = document.getElementById('league').value;
    const cfg = configs[lKey];
    const inputs = ['a_npxg','a_ppa','a_tkl','a_prgc','a_spx','b_npxg','b_ppa','b_tkl','b_prgc','b_spx_ag','tilt'];
    
    for(let id of inputs) {
        if(!document.getElementById(id).value) { alert("TÃ¼m verileri girin!"); return; }
    }

    const A = { n: Number(document.getElementById('a_npxg').value), p: Number(document.getElementById('a_ppa').value), t: Number(document.getElementById('a_tkl').value), c: Number(document.getElementById('a_prgc').value), sp: Number(document.getElementById('a_spx').value) };
    const B = { n: Number(document.getElementById('b_npxg').value), p: Number(document.getElementById('b_ppa').value), t: Number(document.getElementById('b_tkl').value), c: Number(document.getElementById('b_prgc').value), sp_ag: Number(document.getElementById('b_spx_ag').value) };
    const tilt = Number(document.getElementById('tilt').value);

    let score = 0; let logs = [];

    if (A.n <= cfg.npxg && B.n <= cfg.npxg) { score += 30; logs.push("âœ“ Ã‡ift taraflÄ± npxG kÄ±sÄ±rlÄ±ÄŸÄ±."); }
    if (((A.p + B.p)/2) <= cfg.ppa) { score += 25; logs.push("âœ“ SÄ±zma paslarÄ± kilitli."); }
    if (A.c <= cfg.prgc && B.c <= cfg.prgc) { score += 20; logs.push("âœ“ DÃ¼ÅŸÃ¼k tempo onayÄ±."); }
    
    if (tilt >= 44 && tilt <= 56) { score += 25; logs.push("âœ“ Saha dengesi mÃ¼kemmel."); }
    else if ((tilt > 65 || tilt < 35) && ((A.p + B.p)/2) <= cfg.ppa) { score += 20; logs.push("ðŸ›¡ï¸ Derin Blok: BaskÄ± var ama sÄ±zma yok."); }
    else { score -= 15; logs.push("âœ– Riskli alan hakimiyeti."); }

    if (A.sp > cfg.sp && B.sp_ag > cfg.sp) { score -= 30; logs.push("ðŸš© SABOTAJ: Duran top zÄ±tlÄ±ÄŸÄ± riskli!"); }

    score = Math.max(0, Math.min(100, score));
    const res = { score, logs, league: cfg.n, date: new Date().toLocaleTimeString() };
    localStorage.setItem('lastAnaliz', JSON.stringify(res));
    display(res);
}

function display(data) {
    document.getElementById('result').style.display = "block";
    document.getElementById('res_league').innerText = data.league + " | " + data.date;
    const s = document.getElementById('res_score');
    s.innerText = "%" + data.score;
    s.style.color = data.score > 75 ? "#22c55e" : (data.score > 50 ? "#f59e0b" : "#ef4444");
    document.getElementById('res_details').innerHTML = data.logs.map(l => `<div>${l}</div>`).join('');
}

window.onload = () => {
    const last = localStorage.getItem('lastAnaliz');
    if(last) display(JSON.parse(last));
};
</script>
</body>
</html>

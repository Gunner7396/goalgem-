<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Beton Analiz v8.3 - FBref Edition</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; --text: #f8fafc; --danger: #ef4444; --success: #22c55e; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; }
        .app-container { width: 100%; max-width: 480px; display: flex; flex-direction: column; height: 100%; }
        
        /* GÄ°RÄ°Åž ALANI */
        .input-card { background: var(--card); padding: 15px; border-radius: 15px; flex-shrink: 0; border: 1px solid #334155; margin-bottom: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .team-box { background: #0f172a; padding: 10px; border-radius: 12px; border: 1px solid #334155; }
        label { display: block; font-size: 0.6rem; color: #94a3b8; margin: 6px 0 2px; text-transform: uppercase; font-weight: 800; }
        input, select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #475569; color: #fff; border-radius: 8px; font-size: 0.9rem; outline: none; }
        .name-input { border: none !important; border-bottom: 2px solid var(--accent) !important; margin-bottom: 8px; font-weight: bold; background: transparent !important; border-radius: 0 !important; text-align: center; }
        
        /* BUTONLAR */
        .btn-group { display: grid; grid-template-columns: 2fr 1fr; gap: 8px; margin-top: 12px; }
        button { padding: 14px; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; }
        .btn-calc { background: var(--accent); color: #0f172a; }
        .btn-clear { background: #334155; color: #fff; font-size: 0.7rem; }
        
        /* KAYDIRILABÄ°LÄ°R LÄ°STE ALANI */
        .list-header { display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; flex-shrink: 0; }
        .results-container { flex-grow: 1; overflow-y: auto; padding: 5px; margin-top: 5px; border-top: 1px solid #334155; -webkit-overflow-scrolling: touch; }
        
        /* ANALÄ°Z KARTI */
        .analysis-card { background: var(--card); padding: 12px; border-radius: 12px; margin-bottom: 8px; border-left: 5px solid var(--accent); position: relative; display: flex; align-items: center; }
        .score-display { font-size: 1.6rem; font-weight: 900; min-width: 60px; margin-right: 12px; }
        .meta { font-size: 0.7rem; color: #94a3b8; }
        .tag-row { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px; }
        .tag { font-size: 0.6rem; padding: 2px 6px; border-radius: 4px; background: #334155; color: var(--accent); font-weight: bold; }
        .del-single { position: absolute; right: 8px; top: 8px; color: #475569; background: none; border: none; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="input-card">
        <select id="league" style="margin-bottom:10px;">
            <option value="ita">ðŸ‡®ðŸ‡¹ Serie A (Ä°talya)</option>
            <option value="esp">ðŸ‡ªðŸ‡¸ La Liga (Ä°spanya)</option>
            <option value="fra">ðŸ‡«ðŸ‡· Ligue 1 (Fransa)</option>
            <option value="eng">ðŸ‡¬ðŸ‡§ Premier League (Ä°ngiltere)</option>
            <option value="ger">ðŸ‡©ðŸ‡ª Bundesliga (Almanya)</option>
        </select>

        <div class="grid">
            <div class="team-box">
                <input type="text" id="h_name" class="name-input" placeholder="EV SAHÄ°BÄ°">
                <label title="Shooting Tablosu">npxG/Sh</label><input type="text" id="h_n" inputmode="decimal" placeholder="">
                <label title="Passing Tablosu">PPA</label><input type="text" id="h_p" inputmode="decimal" placeholder="">
                <label title="Defense Tablosu">Drb Past</label><input type="text" id="h_d" inputmode="decimal" placeholder="">
                <label title="Possession Tablosu">Att 3rd Tchs</label><input type="text" id="h_t" inputmode="decimal" placeholder="">
            </div>
            <div class="team-box">
                <input type="text" id="a_name" class="name-input" placeholder="DEPLASMAN">
                <label>npxG/Sh</label><input type="text" id="a_n" inputmode="decimal" placeholder="">
                <label>PPA</label><input type="text" id="a_p" inputmode="decimal" placeholder="">
                <label>Drb Past</label><input type="text" id="a_d" inputmode="decimal" placeholder="">
                <label>Att 3rd Tchs</label><input type="text" id="a_t" inputmode="decimal" placeholder="">
            </div>
        </div>

        <div class="btn-group">
            <button class="btn-calc" onclick="hesapla()">ANALÄ°Z ET</button>
            <button class="btn-clear" onclick="inputTemizle()">KUTULARI SÄ°L</button>
        </div>
    </div>

    <div class="list-header">
        <span style="font-size: 0.8rem; font-weight: bold; opacity: 0.7;">GEÃ‡MÄ°Åž ANALÄ°ZLER</span>
        <button onclick="listeTemizle()" style="background:none; border:none; color:var(--danger); font-size: 0.7rem; font-weight: bold; cursor:pointer;">LÄ°STEYÄ° BOÅžALT</button>
    </div>

    <div id="results" class="results-container"></div>
</div>

<script>
const leagueConfigs = {
    ita: { n: "Serie A", npxg: 0.08, ppa: 8.0, drib: 12 },
    esp: { n: "La Liga", npxg: 0.08, ppa: 7.5, drib: 11 },
    fra: { n: "Ligue 1", npxg: 0.08, ppa: 7.5, drib: 10 },
    eng: { n: "EPL", npxg: 0.075, ppa: 8.5, drib: 13 },
    ger: { n: "Bundesliga", npxg: 0.07, ppa: 6.5, drib: 10 }
};

function inputTemizle() {
    document.querySelectorAll('input').forEach(i => i.value = "");
}

function listeTemizle() {
    if(confirm("TÃ¼m analiz geÃ§miÅŸi silinsin mi?")) {
        document.getElementById('results').innerHTML = "";
    }
}

function cleanNum(val) {
    if (!val) return 0;
    return parseFloat(val.toString().replace(',', '.'));
}

function hesapla() {
    const lKey = document.getElementById('league').value;
    const cfg = leagueConfigs[lKey];
    
    const fields = ['h_n', 'a_n', 'h_p', 'a_p', 'h_d', 'a_d', 'h_t', 'a_t'];
    if(fields.some(id => document.getElementById(id).value.trim() === "")) {
        alert("FBref verilerini eksiksiz girin!");
        return;
    }

    const d = {
        h: document.getElementById('h_name').value || "Ev",
        a: document.getElementById('a_name').value || "Dep",
        hn: cleanNum(document.getElementById('h_n').value), hp: cleanNum(document.getElementById('h_p').value), 
        hd: cleanNum(document.getElementById('h_d').value), ht: cleanNum(document.getElementById('h_t').value),
        an: cleanNum(document.getElementById('a_n').value), ap: cleanNum(document.getElementById('a_p').value), 
        ad: cleanNum(document.getElementById('a_d').value), at: cleanNum(document.getElementById('a_t').value)
    };

    let score = 0;
    let tags = [];

    if (d.hn <= cfg.npxg && d.an <= cfg.npxg) { score += 40; tags.push("KÄ±sÄ±r xG âœ…"); }
    if (d.hp <= cfg.ppa && d.ap <= cfg.ppa) { score += 30; tags.push("DÃ¼ÅŸÃ¼k PPA âœ…"); }
    if (d.hd <= cfg.drib && d.ad <= cfg.drib) { score += 10; tags.push("Sert Sav âœ…"); }

    const totalT = d.ht + d.at;
    const hRatio = totalT > 0 ? (d.ht / totalT) * 100 : 0;
    if (hRatio >= 42 && hRatio <= 58) { score += 20; tags.push("Kilitli âœ…"); }

    const resDiv = document.getElementById('results');
    const card = document.createElement('div');
    card.className = "analysis-card";
    const statusColor = score >= 80 ? 'var(--success)' : (score >= 60 ? '#f59e0b' : 'var(--danger)');
    card.style.borderLeftColor = statusColor;
    
    card.innerHTML = `
        <div class="score-display" style="color:${statusColor}">%${score}</div>
        <div style="flex:1">
            <div style="font-weight:bold; font-size:0.9rem; color:#fff;">${d.h} - ${d.a}</div>
            <div class="meta">${cfg.n} â€¢ ${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</div>
            <div class="tag-row">${tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
        </div>
        <button class="del-single" onclick="this.parentElement.remove()">Ã—</button>
    `;
    resDiv.prepend(card);
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Beton Analiz v8.0</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; --text: #f8fafc; --danger: #ef4444; --success: #22c55e; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; display: flex; flex-direction: column; align-items: center; }
        .app-container { width: 100%; max-width: 480px; }
        .input-card { background: var(--card); padding: 15px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.3); margin-bottom: 15px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .team-box { background: #0f172a; padding: 12px; border-radius: 12px; border: 1px solid #334155; }
        label { display: block; font-size: 0.65rem; opacity: 0.8; margin: 8px 0 2px; text-transform: uppercase; }
        input { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #475569; color: #fff; border-radius: 8px; font-size: 1rem; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--accent); }
        .name-input { border: none; border-bottom: 2px solid var(--accent); margin-bottom: 10px; font-weight: bold; background: transparent; border-radius: 0; }
        .btn-group { display: grid; grid-template-columns: 3fr 1fr; gap: 10px; margin-top: 15px; }
        button { padding: 16px; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; transition: 0.2s; }
        .btn-calc { background: var(--accent); color: #0f172a; }
        .btn-reset { background: #334155; color: #fff; font-size: 0.8rem; }
        .analysis-card { background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 10px; border-left: 6px solid var(--accent); animation: slideIn 0.3s ease; position: relative; }
        .score-display { font-size: 1.8rem; font-weight: 900; margin-right: 15px; }
        .meta { font-size: 0.75rem; color: #94a3b8; line-height: 1.4; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-container">
    <div class="input-card">
        <select id="league" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; background:#0f172a; color:#fff; border:1px solid #334155;">
            <option value="ita">ðŸ‡®ðŸ‡¹ Ä°talya Serie A</option>
            <option value="esp">ðŸ‡ªðŸ‡¸ Ä°spanya La Liga</option>
            <option value="fra">ðŸ‡«ðŸ‡· Fransa Ligue 1</option>
            <option value="eng">ðŸ‡¬ðŸ‡§ Ä°ngiltere Premier Lig</option>
            <option value="ger">ðŸ‡©ðŸ‡ª Almanya Bundesliga</option>
        </select>

        <div class="grid">
            <div class="team-box">
                <input type="text" id="h_name" class="name-input" placeholder="EV TAKIMI">
                <label>npxG/Sh</label><input type="number" id="h_n" inputmode="decimal" step="0.01">
                <label>PPA</label><input type="number" id="h_p" inputmode="decimal" step="0.5">
                <label>Ã‡alÄ±m Yeme</label><input type="number" id="h_d" inputmode="decimal">
                <label>3. BÃ¶lge Temas</label><input type="number" id="h_t" inputmode="decimal" placeholder="Ã–rn: 120">
            </div>
            <div class="team-box">
                <input type="text" id="a_name" class="name-input" placeholder="DEP TAKIMI">
                <label>npxG/Sh</label><input type="number" id="a_n" inputmode="decimal" step="0.01">
                <label>PPA</label><input type="number" id="a_p" inputmode="decimal" step="0.5">
                <label>Ã‡alÄ±m Yeme</label><input type="number" id="a_d" inputmode="decimal">
                <label>3. BÃ¶lge Temas</label><input type="number" id="a_t" inputmode="decimal" placeholder="Ã–rn: 110">
            </div>
        </div>

        <div class="btn-group">
            <button class="btn-calc" onclick="hesapla()">ANALÄ°ZÄ° KAYDET</button>
            <button class="btn-reset" onclick="temizle()">SÄ°L</button>
        </div>
    </div>

    <div id="results"></div>
</div>

<script>
const leagueConfigs = {
    ita: { n: "Serie A", npxg: 0.08, ppa: 8.0, drib: 12 },
    esp: { n: "La Liga", npxg: 0.08, ppa: 7.5, drib: 11 },
    fra: { n: "Ligue 1", npxg: 0.08, ppa: 7.5, drib: 10 },
    eng: { n: "EPL", npxg: 0.075, ppa: 8.5, drib: 13 },
    ger: { n: "Bundesliga", npxg: 0.07, ppa: 6.5, drib: 10 }
};

function temizle() {
    document.querySelectorAll('input').forEach(i => i.value = "");
}

function hesapla() {
    const lKey = document.getElementById('league').value;
    const cfg = leagueConfigs[lKey];
    const d = {
        h: document.getElementById('h_name').value || "Ev",
        a: document.getElementById('a_name').value || "Dep",
        hn: Number(document.getElementById('h_n').value), hp: Number(document.getElementById('h_p').value), hd: Number(document.getElementById('h_d').value), ht: Number(document.getElementById('h_t').value),
        an: Number(document.getElementById('a_n').value), ap: Number(document.getElementById('a_p').value), ad: Number(document.getElementById('a_d').value), at: Number(document.getElementById('a_t').value)
    };

    let score = 0;
    let details = [];

    // 1. KÄ±sÄ±rlÄ±k KontrolÃ¼ (40 Puan)
    if (d.hn <= cfg.npxg && d.an <= cfg.npxg) { score += 40; details.push("DÃ¼ÅŸÃ¼k xG âœ…"); }
    
    // 2. PPA KontrolÃ¼ (30 Puan)
    if (d.hp <= cfg.ppa && d.ap <= cfg.ppa) { score += 30; details.push("PPA SÄ±nÄ±rda âœ…"); }

    // 3. Savunma (Ã‡alÄ±m) KontrolÃ¼ (10 Puan)
    if (d.hd <= cfg.drib && d.ad <= cfg.drib) { score += 10; details.push("Savunma Sert âœ…"); }

    // 4. AKILLI DENGE HESABI (20 Puan)
    // FBRef 'Touches (Att 3rd)' verisi Ã¼zerinden Tilt simÃ¼lasyonu
    const totalTouches = d.ht + d.at;
    const hRatio = (d.ht / totalTouches) * 100;
    if (hRatio >= 42 && hRatio <= 58) { 
        score += 20; 
        details.push("Dengeli BaskÄ± âœ…"); 
    } else {
        details.push("Dengesiz BaskÄ± âš ï¸");
    }

    const resDiv = document.getElementById('results');
    const card = document.createElement('div');
    card.className = "analysis-card";
    const color = score >= 80 ? 'var(--success)' : (score >= 60 ? '#f59e0b' : 'var(--danger)');
    card.style.borderLeftColor = color;
    
    card.innerHTML = `
        <div style="display:flex; align-items:center;">
            <div class="score-display" style="color:${color}">%${score}</div>
            <div style="flex:1">
                <div style="font-weight:bold; font-size:1.1rem; color:#fff;">${d.h} - ${d.a}</div>
                <div class="meta">${cfg.n} â€¢ ${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</div>
                <div class="meta" style="color:var(--accent); margin-top:4px; font-weight:600;">${details.join(' â€¢ ')}</div>
            </div>
        </div>
    `;
    resDiv.prepend(card);
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Gemini Ultra-Hassas 1.5 Alt Analiz Paneli</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; --text: #f1f5f9; --danger: #ef4444; --success: #22c55e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; padding: 20px; }
        .container { width: 900px; background: var(--card); padding: 30px; border-radius: 15px; shadow: 0 10px 25px rgba(0,0,0,0.5); }
        h1 { text-align: center; color: var(--accent); margin-bottom: 5px; }
        p.subtitle { text-align: center; font-size: 0.9em; opacity: 0.7; margin-bottom: 25px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .league-select { grid-column: span 2; margin-bottom: 20px; }
        select, input { width: 100%; padding: 10px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 5px; margin-top: 5px; }
        label { font-size: 0.85em; font-weight: bold; color: var(--accent); }
        .team-box { border: 1px solid #334155; padding: 15px; border-radius: 10px; }
        .btn { grid-column: span 2; padding: 15px; background: var(--accent); color: #0f172a; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; font-size: 1.1em; margin-top: 20px; }
        #result { grid-column: span 2; margin-top: 25px; padding: 20px; border-radius: 10px; display: none; }
        .warning { color: var(--danger); font-size: 0.85em; margin-top: 10px; display: block; }
        .metric-group { margin-bottom: 15px; }
        .gauge-container { text-align: center; margin-bottom: 20px; }
        .gauge-value { font-size: 2.5em; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>Kuantum 1.5 Alt Analizörü</h1>
    <p class="subtitle">5 Büyük Lig / Ultra-Hassas Eşik Algoritması</p>

    <div class="grid">
        <div class="league-select">
            <label>Lig Seçimi (Eşikleri Otomatik Yükler)</label>
            <select id="league">
                <option value="ita">İtalya Serie A</option>
                <option value="esp">İspanya La Liga</option>
                <option value="fra">Fransa Ligue 1</option>
                <option value="eng">İngiltere Premier League</option>
                <option value="ger">Almanya Bundesliga</option>
            </select>
        </div>

        <div class="team-box">
            <h3>Ev Sahibi (A)</h3>
            <div class="metric-group">
                <label>npxG / Per Shot (Son 5 Maç)</label>
                <input type="number" id="a_npxg" step="0.01" value="0.08">
            </div>
            <div class="metric-group">
                <label>PPA (Sızma Pası)</label>
                <input type="number" id="a_ppa" value="7">
            </div>
            <div class="metric-group">
                <label>Mid-Tkl (Orta Saha Direnç)</label>
                <input type="number" id="a_tkl" value="25">
            </div>
            <div class="metric-group">
                <label>PrgC (Top Taşıma Temposu)</label>
                <input type="number" id="a_prgc" value="12">
            </div>
            <label><input type="checkbox" id="a_setpiece"> Duran Top Uzmanı</label>
        </div>

        <div class="team-box">
            <h3>Deplasman (B)</h3>
            <div class="metric-group">
                <label>npxG / Per Shot (Son 5 Maç)</label>
                <input type="number" id="b_npxg" step="0.01" value="0.08">
            </div>
            <div class="metric-group">
                <label>PPA (Sızma Pası)</label>
                <input type="number" id="b_ppa" value="7">
            </div>
            <div class="metric-group">
                <label>Mid-Tkl (Orta Saha Direnç)</label>
                <input type="number" id="b_tkl" value="25">
            </div>
            <div class="metric-group">
                <label>PrgC (Top Taşıma Temposu)</label>
                <input type="number" id="b_prgc" value="12">
            </div>
            <label><input type="checkbox" id="b_bad_def"> Duran Top Savunması Zayıf</label>
        </div>

        <div class="metric-group" style="grid-column: span 2; text-align: center;">
            <label>Field Tilt (Saha Baskı Dengesi %)</label>
            <input type="number" id="field_tilt" value="50" style="width: 100px; text-align: center;">
        </div>

        <button class="btn" onclick="analizEt()">BETONLUK TESTİNİ BAŞLAT</button>

        <div id="result">
            <div class="gauge-container">
                <div id="gaugeText">BETONLUK SKORU</div>
                <div id="gaugeValue" class="gauge-value">%0</div>
            </div>
            <div id="analysisDetails"></div>
            <div id="sabotageWarning" class="warning"></div>
        </div>
    </div>
</div>

<script>
const thresholds = {
    ita: { npxg: 0.08, ppa: 8.0, tkl: 22, prgc: 12 },
    esp: { npxg: 0.08, ppa: 7.5, tkl: 24, prgc: 11 },
    fra: { npxg: 0.08, ppa: 7.5, tkl: 25, prgc: 12 },
    eng: { npxg: 0.075, ppa: 8.5, tkl: 28, prgc: 14 },
    ger: { npxg: 0.07, ppa: 6.5, tkl: 30, prgc: 10 }
};

function analizEt() {
    const L = document.getElementById('league').value;
    const t = thresholds[L];
    
    const A = {
        npxg: parseFloat(document.getElementById('a_npxg').value),
        ppa: parseFloat(document.getElementById('a_ppa').value),
        tkl: parseFloat(document.getElementById('a_tkl').value),
        prgc: parseFloat(document.getElementById('a_prgc').value),
        sp: document.getElementById('a_setpiece').checked
    };
    
    const B = {
        npxg: parseFloat(document.getElementById('b_npxg').value),
        ppa: parseFloat(document.getElementById('b_ppa').value),
        tkl: parseFloat(document.getElementById('b_tkl').value),
        prgc: parseFloat(document.getElementById('b_prgc').value),
        bad_sp: document.getElementById('b_bad_def').checked
    };

    const tilt = parseFloat(document.getElementById('field_tilt').value);
    let score = 0;
    let details = "";

    // 1. npxG Kontrolü (Ağırlık: 30)
    if (A.npxg <= t.npxg && B.npxg <= t.npxg) { score += 30; details += "✓ Her iki takım da bitiricilikte kısır.<br>"; }
    else if (A.npxg <= t.npxg || B.npxg <= t.npxg) { score += 15; details += "⚠ Sadece bir takım bitiricilikte zayıf.<br>"; }

    // 2. PPA vs Tkl Çarpışması (Ağırlık: 25)
    if (A.ppa <= t.ppa && B.tkl >= t.tkl) { score += 25; details += "✓ A sızamıyor, B iyi direnç gösteriyor.<br>"; }
    else { details += "⚠ Sızma pasları savunma direncini zorlayabilir.<br>"; }

    // 3. PrgC Tempo (Ağırlık: 20)
    if (A.prgc <= t.prgc && B.prgc <= t.prgc) { score += 20; details += "✓ Oyun temposu kilitli (Düşük PrgC).<br>"; }

    // 4. Field Tilt Emniyet Kilidi (Ağırlık: 25)
    if (tilt >= 45 && tilt <= 55) { score += 25; details += "✓ Saha dengesi mükemmel (Field Tilt %50 civarı).<br>"; }
    else if (tilt > 65 || tilt < 35) { score -= 20; details += "✖ Yüksek baskı var (Field Tilt riskli)!<br>"; }

    // 5. Duran Top Sabotaj Filtresi
    let sabotage = "";
    if (A.sp && B.bad_sp) {
        score -= 30;
        sabotage = "!!! KRİTİK UYARI: Duran top uzmanı vs Zayıf savunma çakışması! Skor düşürüldü.";
    }

    // Sonuç Ekranı
    const resDiv = document.getElementById('result');
    const gVal = document.getElementById('gaugeValue');
    const gDet = document.getElementById('analysisDetails');
    const gSab = document.getElementById('sabotageWarning');

    resDiv.style.display = "block";
    score = Math.max(0, Math.min(100, score));
    gVal.innerText = "%" + score;
    gVal.style.color = score > 75 ? "#22c55e" : (score > 50 ? "#eab308" : "#ef4444");
    gDet.innerHTML = details;
    gSab.innerText = sabotage;
    resDiv.style.border = `2px solid ${gVal.style.color}`;
}
</script>

</body>
</html>

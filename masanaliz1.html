<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masanaliz v4.5 - Final Logic</title>
    <style>
        :root { --bg: #0a0a0a; --card: #141414; --accent: #00ff88; --dim: #888; --home: #00d2ff; --away: #ff4081; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: #fff; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        .panel { background: var(--card); width: 100%; max-width: 450px; border-radius: 16px; padding: 15px; border: 1px solid #222; box-sizing: border-box; margin-bottom: 15px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
        input, select { background: #1a1a1a; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; font-size: 12px; outline: none; }
        .btn-main { background: var(--accent); color: #000; border: none; padding: 14px; border-radius: 10px; font-weight: 800; width: 100%; margin-top: 12px; cursor: pointer; }
        .card { background: var(--card); border-radius: 20px; padding: 18px; margin-bottom: 15px; border: 1px solid #222; width: 100%; max-width: 450px; box-sizing: border-box; }
        .goal-probs { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin: 15px 0; }
        .prob-box { background: #1a1a1a; padding: 10px 2px; border-radius: 12px; text-align: center; border: 1px solid #222; }
        .p-val { display: block; font-size: 14px; font-weight: 800; color: var(--accent); }
        .p-lbl { font-size: 7px; color: var(--dim); font-weight: bold; }
        .ai-text { font-size: 12px; line-height: 1.4; color: #ccc; background: #000; padding: 12px; border-radius: 10px; border-left: 3px solid var(--accent); }
    </style>
</head>
<body>

<div class="panel">
    <select id="league" style="width: 100%;">
        <option value="Bundesliga">Bundesliga</option>
        <option value="Premier League">Premier League</option>
        <option value="Serie A">Serie A</option>
        <option value="La Liga">La Liga</option>
        <option value="Ligue 1">Ligue 1</option>
    </select>
    <div class="grid">
        <input type="text" id="hName" placeholder="Ev Takımı"> <input type="text" id="aName" placeholder="Dep Takımı">
        <input type="text" id="h_npxg" placeholder="npxG/Sh" inputmode="decimal"> <input type="text" id="a_npxg" placeholder="npxG/Sh" inputmode="decimal">
        <input type="text" id="h_ppa" placeholder="PPA" inputmode="decimal"> <input type="text" id="a_ppa" placeholder="PPA" inputmode="decimal">
        <input type="text" id="h_prgc" placeholder="PrgC" inputmode="decimal"> <input type="text" id="a_prgc" placeholder="PrgC" inputmode="decimal">
        <input type="text" id="h_dist" placeholder="Dist" inputmode="decimal"> <input type="text" id="a_dist" placeholder="Dist" inputmode="decimal">
    </div>
    <button class="btn-main" onclick="startAnalysis()">BAŞLAT</button>
</div>

<div id="container" style="width: 100%; max-width: 450px;"></div>

<script>
    function fix(v) { return parseFloat(String(v).replace(',', '.')) || 0; }

    function startAnalysis() {
        const league = document.getElementById('league').value;
        const thresholds = {
            "Premier League": { npxg: 0.14, ppa: 12, prgc: 18 },
            "Bundesliga":     { npxg: 0.12, ppa: 10, prgc: 15 },
            "Serie A":        { npxg: 0.16, ppa: 14, prgc: 16 },
            "La Liga":        { npxg: 0.15, ppa: 13, prgc: 14 },
            "Ligue 1":        { npxg: 0.13, ppa: 11, prgc: 16 }
        };

        const thr = thresholds[league];
        const h = { npxg: fix(document.getElementById('h_npxg').value), ppa: fix(document.getElementById('h_ppa').value), prgc: fix(document.getElementById('h_prgc').value), dist: fix(document.getElementById('h_dist').value) };
        const a = { npxg: fix(document.getElementById('a_npxg').value), ppa: fix(document.getElementById('a_ppa').value), prgc: fix(document.getElementById('a_prgc').value), dist: fix(document.getElementById('a_dist').value) };

        if (!h.npxg || !a.npxg) { alert("Eksik veri!"); return; }

        // Eşik Bazlı Puanlama
        let points = 0;
        points += ((h.npxg + a.npxg) / 2 >= thr.npxg) ? 40 : ((h.npxg + a.npxg) / (2 * thr.npxg)) * 25;
        points += ((h.ppa + a.ppa) / 2 >= thr.ppa) ? 35 : ((h.ppa + a.ppa) / (2 * thr.ppa)) * 20;
        points += ((h.prgc + a.prgc) / 2 >= thr.prgc) ? 25 : ((h.prgc + a.prgc) / (2 * thr.prgc)) * 15;

        const avgDist = (h.dist + a.dist) / 2;
        if (avgDist > 19) points *= 0.8; if (avgDist < 16.5) points *= 1.1;

        const tension = Math.min(Math.round(points), 98);
        const report = tension > 75 ? "B NOKTASI: Eşikler aşıldı, tempo yüksek." : "A NOKTASI: Lig standartlarının altında üretim.";

        const cardHtml = `
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span style="font-size:10px; color:var(--accent); font-weight:bold;">${league}</span>
                    <span style="font-size:24px; font-weight:900; color:var(--accent);">%${tension}</span>
                </div>
                <div style="display:flex; justify-content:space-between; margin:10px 0;">
                    <b style="color:var(--home);">${document.getElementById('hName').value}</b>
                    <b style="color:var(--away);">${document.getElementById('aName').value}</b>
                </div>
                <div class="goal-probs">
                    <div class="prob-box"><span class="p-lbl">0.5 ÜST</span><span class="p-val">%${Math.min(tension+15, 99)}</span></div>
                    <div class="prob-box"><span class="p-lbl">1.5 ÜST</span><span class="p-val">%${Math.round(tension*0.85)}</span></div>
                    <div class="prob-box"><span class="p-lbl">2.5 ÜST</span><span class="p-val">%${Math.round(tension*0.6)}</span></div>
                    <div class="prob-box"><span class="p-lbl">3.5 ÜST</span><span class="p-val">%${Math.round(tension*0.35)}</span></div>
                </div>
                <div class="ai-text">${report}</div>
            </div>`;
        document.getElementById('container').innerHTML = cardHtml + document.getElementById('container').innerHTML;
    }
</script>
</body>
</html>

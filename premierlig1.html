<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premier Analiz Pro - 1.5 Alt/Üst Süzgeci</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card { background: #1e293b; border: 1px solid #334155; }
        body { background: #0f172a; color: #f8fafc; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-center text-blue-400 mb-8">Premier Analiz Pro <span class="text-sm font-normal text-gray-400">v1.0</span></h1>

        <div class="card p-6 rounded-xl shadow-2xl mb-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4 border-r border-gray-700 pr-4">
                    <h2 class="text-xl font-semibold text-blue-300">A Takımı (Ev / Deplasman)</h2>
                    <input type="text" id="teamA" placeholder="Takım Adı" class="w-full p-2 rounded bg-gray-800 border border-gray-600 focus:outline-none focus:border-blue-500">
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-xs text-gray-400">npxG</label><input type="number" step="0.01" id="anpxG" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">SCA</label><input type="number" step="0.1" id="aSCA" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">PrgR</label><input type="number" id="aPrgR" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">PPA</label><input type="number" id="aPPA" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                    </div>
                </div>

                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-red-300">B Takımı (Ev / Deplasman)</h2>
                    <input type="text" id="teamB" placeholder="Takım Adı" class="w-full p-2 rounded bg-gray-800 border border-gray-600 focus:outline-none focus:border-red-500">
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-xs text-gray-400">npxG</label><input type="number" step="0.01" id="bnpxG" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">SCA</label><input type="number" step="0.1" id="bSCA" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">PrgR</label><input type="number" id="bPrgR" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                        <div><label class="block text-xs text-gray-400">PPA</label><input type="number" id="bPPA" class="w-full p-2 rounded bg-gray-800 border border-gray-600"></div>
                    </div>
                </div>
            </div>
            <button onclick="analyzeMatch()" class="w-full mt-8 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition">ANALİZ ET VE KAYDET</button>
        </div>

        <div id="history" class="space-y-6">
            </div>
    </div>

    <script>
        // Sayfa yüklendiğinde geçmişi getir
        window.onload = () => { displayHistory(); };

        function analyzeMatch() {
            const data = {
                id: Date.now(),
                tA: document.getElementById('teamA').value || 'A Takımı',
                tB: document.getElementById('teamB').value || 'B Takımı',
                anpxG: parseFloat(document.getElementById('anpxG').value),
                aSCA: parseFloat(document.getElementById('aSCA').value),
                aPrgR: parseFloat(document.getElementById('aPrgR').value),
                aPPA: parseFloat(document.getElementById('aPPA').value),
                bnpxG: parseFloat(document.getElementById('bnpxG').value),
                bSCA: parseFloat(document.getElementById('bSCA').value),
                bPrgR: parseFloat(document.getElementById('bPrgR').value),
                bPPA: parseFloat(document.getElementById('bPPA').value),
            };

            // Hesaplamalar
            const totalSCA = data.aSCA + data.bSCA;
            const avgNpxG = (data.anpxG + data.bnpxG) / 2;
            const totalPrgR = data.aPrgR + data.bPrgR;
            const totalPPA = data.aPPA + data.bPPA;

            let result = "";
            let color = "";
            let reason = "";

            // Karar Mantığı (Seninle oluşturduğumuz kurallar)
            if (avgNpxG < 0.08 && totalSCA < 20 && totalPPA < 11) {
                result = "1.5 ALT (%80 GÜVEN)";
                color = "text-green-400";
                reason = "Sistemdeki 232 maçlık 'Saf Alt' havuzuna tam uyum sağlıyor. Pozisyon kalitesi (npxG) çok düşük ve ceza sahasına sızma yok.";
            } else if (avgNpxG > 0.12 || totalSCA > 35 || totalPrgR > 65) {
                result = "3 GOL VE ÜSTÜ";
                color = "text-red-400";
                reason = `Yüksek riskli bölge! Toplam SCA (${totalSCA.toFixed(1)}) ve PrgR (${totalPrgR}) değerleri 216 maçlık 'Gollü' havuzunu işaret ediyor. Kalite 1.5 Alt sınırını çoktan aşmış.`;
            } else {
                result = "TAM 2 GOL (SINIR)";
                color = "text-yellow-400";
                reason = "Maç 245 maçlık 'Sınır' bölgesinde. Ne tam kısır ne de tam patlamaya hazır. 1-1 veya 2-0 bitme olasılığı %70'in üzerinde.";
            }

            const analysis = { ...data, result, color, reason, totalSCA, avgNpxG, totalPrgR };
            saveAnalysis(analysis);
        }

        function saveAnalysis(item) {
            let logs = JSON.parse(localStorage.getItem('matchLogs')) || [];
            logs.unshift(item);
            localStorage.setItem('matchLogs', JSON.stringify(logs));
            displayHistory();
        }

        function displayHistory() {
            const logs = JSON.parse(localStorage.getItem('matchLogs')) || [];
            const container = document.getElementById('history');
            container.innerHTML = logs.map(log => `
                <div class="card p-6 rounded-xl relative overflow-hidden">
                    <div class="flex justify-between items-start border-b border-gray-700 pb-4 mb-4">
                        <div>
                            <h3 class="text-2xl font-bold font-mono">${log.tA} vs ${log.tB}</h3>
                            <p class="text-sm text-gray-400">${new Date(log.id).toLocaleString()}</p>
                        </div>
                        <div class="text-right">
                            <span class="text-xl font-black ${log.color}">${log.result}</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-4">
                        <div class="bg-gray-900 p-2 rounded"><div class="text-xs text-gray-500">Ort. npxG</div><div class="font-bold">${log.avgNpxG.toFixed(2)}</div></div>
                        <div class="bg-gray-900 p-2 rounded"><div class="text-xs text-gray-500">Top. SCA</div><div class="font-bold">${log.totalSCA.toFixed(1)}</div></div>
                        <div class="bg-gray-900 p-2 rounded"><div class="text-xs text-gray-500">Top. PrgR</div><div class="font-bold">${log.totalPrgR}</div></div>
                        <div class="bg-gray-900 p-2 rounded"><div class="text-xs text-gray-500">Top. PPA</div><div class="font-bold">${log.aPPA + log.bPPA}</div></div>
                    </div>
                    <div class="text-sm bg-black/30 p-4 rounded border-l-4 border-blue-500 italic">
                        <strong>Neden?</strong> ${log.reason}
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
